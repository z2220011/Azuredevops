app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: merge-issue76-ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´AI
kind: app
version: 0.1.1
workflow:
  conversation_variables:
  - description: ''
    id: c75c03e0-b1cc-4b44-801b-a0a1518ce0d4
    name: payload
    value: ''
    value_type: string
  - description: ''
    id: 22c6b7da-a274-4c1d-aee0-dcec69529a8b
    name: end_date
    value: ''
    value_type: string
  - description: ''
    id: 0132a769-49af-4976-93b1-b0767acff8fd
    name: start_date
    value: ''
    value_type: string
  - description: ''
    id: 9c00a0d0-316c-484f-9f60-8dd6f3ec4355
    name: holidays
    value: []
    value_type: array[string]
  - description: ''
    id: 84b59b6f-9ad2-47cd-b21c-70863756708e
    name: exclusion_times
    value: ''
    value_type: string
  - description: ''
    id: f8f53b38-9c1f-4101-b8aa-18da63b0407d
    name: working_times
    value: ''
    value_type: string
  - description: ç©ºãæ™‚é–“æƒ…å ±
    id: 87d7d600-09b7-45c7-9687-5c6ad4eb754a
    name: available_times
    value: ''
    value_type: string
  - description: å®šæ™‚å†…ã§ã®èª¿æ•´ã‹ã€å®šæ™‚å¤–ã§ã®èª¿æ•´ã‹
    id: f6ed8f48-d59a-49bd-8c68-c0184580f2b2
    name: based_on_business_hours
    value: 'False'
    value_type: string
  - description: å‚åŠ è€…ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã«ã—ãŸã‚‚ã®ã€‚
    id: f5e0252c-7339-461c-9b83-7ed5705b1dc5
    name: address
    value: ''
    value_type: string
  - description: æ¨å®šã•ã‚ŒãŸå‚åŠ è€…ã€‚
    id: b1bb4158-9098-4e43-92bb-1eb52e2a0df2
    name: estimated_participants
    value: []
    value_type: array[object]
  - description: ''
    id: e61d6be6-a689-479a-8b8d-51232a6f10b4
    name: step
    value: 1
    value_type: number
  environment_variables:
  - description: ''
    id: dcc0bc85-ce43-459f-afd4-0d3c8622e52d
    name: tenant_id
    value: ''
    value_type: secret
  - description: ''
    id: 6f8f55ba-676a-4d94-a5f8-3a36d53c9faa
    name: client_secret
    value: ''
    value_type: secret
  - description: ''
    id: d7f6062c-29f7-47bf-ab8f-f3a9256bf831
    name: client_id
    value: ''
    value_type: secret
  features:
    file_upload:
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã®ãŠæ‰‹ä¼ã„ã‚’ã„ãŸã—ã¾ã™ã€‚ã¾ãšã€ã¾ãšã¯ä»Šå›ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å‚åŠ ã™ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚


      --------

      **å›ç­”ä¾‹**


      - æ± ç”°ä¿®ä¸€ã€è‡ªå‹•è»Šã®é£¯å¡š

      - ikeda,iizuka'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: answer
      id: 1724684829565-source-1724669003235-target
      selected: false
      source: '1724684829565'
      sourceHandle: source
      target: '1724669003235'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1724685039114-source-1724684829565-target
      selected: false
      source: '1724685039114'
      sourceHandle: source
      target: '1724684829565'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1724689981216-source-1724690070424-target
      selected: false
      source: '1724689981216'
      sourceHandle: source
      target: '1724690070424'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1724688842940-source-1724690805594-target
      selected: false
      source: '1724688842940'
      sourceHandle: source
      target: '1724690805594'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: question-classifier
      id: 1724684610561-75a27092-5d4c-4658-9415-7756a2dac0d0-1724668674576-target
      selected: false
      source: '1724684610561'
      sourceHandle: 75a27092-5d4c-4658-9415-7756a2dac0d0
      target: '1724668674576'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: answer
      id: 1724716277005-source-1724717284776-target
      selected: false
      source: '1724716277005'
      sourceHandle: source
      target: '1724717284776'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: code
        targetType: variable-aggregator
      id: 1725347210853-source-1725410361330-target
      selected: false
      source: '1725347210853'
      sourceHandle: source
      target: '1725410361330'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: code
        targetType: variable-aggregator
      id: 1725410246681-source-1725410361330-target
      selected: false
      source: '1725410246681'
      sourceHandle: source
      target: '1725410361330'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: code
      id: 1724671575189-source-1725414739631-target
      selected: false
      source: '1724671575189'
      sourceHandle: source
      target: '1725414739631'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1725414739631-source-1724688520612-target
      selected: false
      source: '1725414739631'
      sourceHandle: source
      target: '1724688520612'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: answer
      id: 1725582909443-true-1725582938057-target
      selected: false
      source: '1725582909443'
      sourceHandle: 'true'
      target: '1725582938057'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1725582909443-false-1725583035244-target
      selected: false
      source: '1725582909443'
      sourceHandle: 'false'
      target: '1725583035244'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: parameter-extractor
      id: 1725583035244-source-1724664147208-target
      selected: false
      source: '1725583035244'
      sourceHandle: source
      target: '1724664147208'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: parameter-extractor
        targetType: if-else
      id: 1724664147208-source-1725592441269-target
      selected: false
      source: '1724664147208'
      sourceHandle: source
      target: '1725592441269'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: answer
      id: 1725592441269-true-1725592467979-target
      selected: false
      source: '1725592441269'
      sourceHandle: 'true'
      target: '1725592467979'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: http-request
      id: 1727251498456-source-1727251707110-target
      selected: false
      source: '1727251498456'
      sourceHandle: source
      target: '1727251707110'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: code
      id: 1727251707110-source-1727251822339-target
      selected: false
      source: '1727251707110'
      sourceHandle: source
      target: '1727251822339'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: http-request
      id: 1727251901797-source-1727252035654-target
      selected: false
      source: '1727251901797'
      sourceHandle: source
      target: '1727252035654'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: code
      id: 1727252035654-source-1727252112266-target
      selected: false
      source: '1727252035654'
      sourceHandle: source
      target: '1727252112266'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: code
      id: 1727252112266-source-1727252290226-target
      selected: false
      source: '1727252112266'
      sourceHandle: source
      target: '1727252290226'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1724663548765-source-1724684610561-target
      selected: false
      source: '1724663548765'
      sourceHandle: source
      target: '1724684610561'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: code
      id: 1727310221154-source-1724685039114-target
      selected: false
      source: '1727310221154'
      sourceHandle: source
      target: '1724685039114'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: variable-aggregator
      id: 1727310246418-source-1727310746680-target
      selected: false
      source: '1727310246418'
      sourceHandle: source
      target: '1727310746680'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: assigner
      id: 1727310746680-source-1727310221154-target
      selected: false
      source: '1727310746680'
      sourceHandle: source
      target: '1727310221154'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: variable-aggregator
      id: 17273106731170-source-1727310746680-target
      selected: false
      source: '17273106731170'
      sourceHandle: source
      target: '1727310746680'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1727252615094-source-1728519034672-target
      selected: false
      source: '1727252615094'
      sourceHandle: source
      target: '1728519034672'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: code
      id: 1724690070424-source-1727251498456-target
      selected: false
      source: '1724690070424'
      sourceHandle: source
      target: '1727251498456'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: code
      id: 1727251822339-source-1727251901797-target
      selected: false
      source: '1727251822339'
      sourceHandle: source
      target: '1727251901797'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: if-else
      id: 1724688520612-source-1728530898275-target
      selected: false
      source: '1724688520612'
      sourceHandle: source
      target: '1728530898275'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1728530898275-true-1727310246418-target
      selected: false
      source: '1728530898275'
      sourceHandle: 'true'
      target: '1727310246418'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1728530898275-false-17273106731170-target
      selected: false
      source: '1728530898275'
      sourceHandle: 'false'
      target: '17273106731170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: if-else
        targetType: code
      id: 1725342628745-false-1725410246681-target
      selected: false
      source: '1725342628745'
      sourceHandle: 'false'
      target: '1725410246681'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: parameter-extractor
        targetType: code
      id: 17246874287790-source-1724688842940-target
      selected: false
      source: '17246874287790'
      sourceHandle: source
      target: '1724688842940'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1729175190062-source-1729175245853-target
      selected: false
      source: '1729175190062'
      sourceHandle: source
      target: '1729175245853'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: answer
      id: 1729175423598-source-1729175270818-target
      selected: false
      source: '1729175423598'
      sourceHandle: source
      target: '1729175270818'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: answer
      id: 1729175245853-source-1729175885840-target
      selected: false
      source: '1729175245853'
      sourceHandle: source
      target: '1729175885840'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: code
      id: 1724668674576-2-1729175190062-target
      selected: false
      source: '1724668674576'
      sourceHandle: '2'
      target: '1729175190062'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: parameter-extractor
      id: 1724668674576-1729175083088-17246874287790-target
      selected: false
      source: '1724668674576'
      sourceHandle: '1729175083088'
      target: '17246874287790'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: code
      id: 1724690805594-source-1729175986261-target
      selected: false
      source: '1724690805594'
      sourceHandle: source
      target: '1729175986261'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1729175986261-source-1729176044844-target
      selected: false
      source: '1729175986261'
      sourceHandle: source
      target: '1729176044844'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: answer
      id: 1729176044844-source-1724689069361-target
      selected: false
      source: '1729176044844'
      sourceHandle: source
      target: '1724689069361'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: question-classifier
      id: 1724684610561-08c1563f-2b26-417a-8809-b1c69dbf022c-1729176093466-target
      selected: false
      source: '1724684610561'
      sourceHandle: 08c1563f-2b26-417a-8809-b1c69dbf022c
      target: '1729176093466'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: code
      id: 1729176093466-1-1729176193190-target
      selected: false
      source: '1729176093466'
      sourceHandle: '1'
      target: '1729176193190'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1729176193190-source-1729176240096-target
      selected: false
      source: '1729176193190'
      sourceHandle: source
      target: '1729176240096'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: code
      id: 1729176240096-source-1729175423598-target
      selected: false
      source: '1729176240096'
      sourceHandle: source
      target: '1729175423598'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: code
      id: 1729176093466-2-1724689981216-target
      selected: false
      source: '1729176093466'
      sourceHandle: '2'
      target: '1724689981216'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: question-classifier
      id: 1724684610561-false-1729402806019-target
      selected: false
      source: '1724684610561'
      sourceHandle: 'false'
      target: '1729402806019'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: answer
      id: 1729402806019-1-1729403028681-target
      selected: false
      source: '1729402806019'
      sourceHandle: '1'
      target: '1729403028681'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: llm
      id: 1728519034672-source-1724716277005-target
      selected: false
      source: '1728519034672'
      sourceHandle: source
      target: '1724716277005'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: assigner
      id: 1727252290226-source-1729404163513-target
      selected: false
      source: '1727252290226'
      sourceHandle: source
      target: '1729404163513'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: assigner
      id: 1729404163513-source-1729404201236-target
      selected: false
      source: '1729404163513'
      sourceHandle: source
      target: '1729404201236'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: assigner
      id: 1729404338268-source-1729404378589-target
      selected: false
      source: '1729404338268'
      sourceHandle: source
      target: '1729404378589'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: assigner
      id: 1729404378589-source-1729404428309-target
      selected: false
      source: '1729404378589'
      sourceHandle: source
      target: '1729404428309'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: answer
      id: 17294031324280-source-1729484518506-target
      selected: false
      source: '17294031324280'
      sourceHandle: source
      target: '1729484518506'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: iteration
      id: 1725592441269-false-1724671575189-target
      selected: false
      source: '1725592441269'
      sourceHandle: 'false'
      target: '1724671575189'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: answer
      id: 1729402806019-1729483823544-1729484406610-target
      selected: false
      source: '1729402806019'
      sourceHandle: '1729483823544'
      target: '1729484406610'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: question-classifier
      id: 1729402806019-2-1729660439862-target
      selected: false
      source: '1729402806019'
      sourceHandle: '2'
      target: '1729660439862'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: llm
      id: 1729660439862-2-17294031324280-target
      selected: false
      source: '1729660439862'
      sourceHandle: '2'
      target: '17294031324280'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: answer
      id: 1729660439862-1-1729660641962-target
      selected: false
      source: '1729660439862'
      sourceHandle: '1'
      target: '1729660641962'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: assigner
      id: 1729404201236-source-1729404338268-target
      selected: false
      source: '1729404201236'
      sourceHandle: source
      target: '1729404338268'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: code
      id: 1729696467433-source-1727252615094-target
      selected: false
      source: '1729696467433'
      sourceHandle: source
      target: '1727252615094'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: assigner
        targetType: assigner
      id: 1729404428309-source-1729696467433-target
      selected: false
      source: '1729404428309'
      sourceHandle: source
      target: '1729696467433'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: http-request
      id: 1729402806019-1729402844349-1729696985461-target
      selected: false
      source: '1729402806019'
      sourceHandle: '1729402844349'
      target: '1729696985461'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: code
      id: 1729696985461-source-1729697165815-target
      selected: false
      source: '1729696985461'
      sourceHandle: source
      target: '1729697165815'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: http-request
      id: 1729697165815-source-1729696613581-target
      selected: false
      source: '1729697165815'
      sourceHandle: source
      target: '1729696613581'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: code
      id: 1729696613581-source-1729697280782-target
      selected: false
      source: '1729696613581'
      sourceHandle: source
      target: '1729697280782'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: code
      id: 1729697280782-source-1729403585014-target
      selected: false
      source: '1729697280782'
      sourceHandle: source
      target: '1729403585014'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: knowledge-retrieval
        targetType: if-else
      id: 1731895695949-source-1731896601287-target
      selected: false
      source: '1731895695949'
      sourceHandle: source
      target: '1731896601287'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: code
        targetType: answer
      id: 1731897570544-source-1729485334320-target
      selected: false
      source: '1731897570544'
      sourceHandle: source
      target: '1729485334320'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: code
        targetType: if-else
      id: 1731898572900-source-1731898754758-target
      selected: false
      source: '1731898572900'
      sourceHandle: source
      target: '1731898754758'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1731898754758-true-1731895695949-target
      selected: false
      source: '1731898754758'
      sourceHandle: 'true'
      target: '1731895695949'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: if-else
        targetType: code
      id: 1731896601287-false-1731896624716-target
      selected: false
      source: '1731896601287'
      sourceHandle: 'false'
      target: '1731896624716'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: code
        targetType: variable-aggregator
      id: 1731896624716-source-1732022414666-target
      selected: false
      source: '1731896624716'
      sourceHandle: source
      target: '1732022414666'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1731895655350'
        sourceType: if-else
        targetType: variable-aggregator
      id: 1731898754758-false-1732022414666-target
      selected: false
      source: '1731898754758'
      sourceHandle: 'false'
      target: '1732022414666'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1724684610561-true-1732142701121-target
      source: '1724684610561'
      sourceHandle: 'true'
      target: '1732142701121'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: knowledge-retrieval
        targetType: if-else
      id: 1732142701121-source-1725582909443-target
      source: '1732142701121'
      sourceHandle: source
      target: '1725582909443'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: code
        targetType: knowledge-retrieval
      id: 1725426580641-source-1732143228684-target
      source: '1725426580641'
      sourceHandle: source
      target: '1732143228684'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: knowledge-retrieval
        targetType: if-else
      id: 1732143228684-source-1725342628745-target
      source: '1732143228684'
      sourceHandle: source
      target: '1725342628745'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1725342628745-true-1732143337675-target
      source: '1725342628745'
      sourceHandle: 'true'
      target: '1732143337675'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1724671575189'
        sourceType: knowledge-retrieval
        targetType: code
      id: 1732143337675-source-1725347210853-target
      source: '1732143337675'
      sourceHandle: source
      target: '1725347210853'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: code
        targetType: if-else
      id: 1729403585014-source-1732144330538-target
      source: '1729403585014'
      sourceHandle: source
      target: '1732144330538'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: iteration
      id: 1732144330538-true-1731895655350-target
      source: '1732144330538'
      sourceHandle: 'true'
      target: '1731895655350'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: if-else
      id: 1731895655350-source-1732153501305-target
      source: '1731895655350'
      sourceHandle: source
      target: '1732153501305'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1732153501305-false-1731897570544-target
      source: '1732153501305'
      sourceHandle: 'false'
      target: '1731897570544'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: answer
      id: 1732144330538-false-1732144424631-target
      source: '1732144330538'
      sourceHandle: 'false'
      target: '1732144424631'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: answer
      id: 1732153501305-true-17321535881410-target
      source: '1732153501305'
      sourceHandle: 'true'
      target: '17321535881410'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: 'ç©ºãçŠ¶æ³å–å¾—ã®é–‹å§‹æ—¥ï¼ˆä¾‹: yyyy/mm/ddï¼‰â€»æœªå…¥åŠ›ã®å ´åˆã¯æœ¬æ—¥ã‹ã‚‰'
          max_length: 48
          options: []
          required: false
          type: text-input
          variable: availability_start_date
        - label: ç©ºãçŠ¶æ³ã‚’å–å¾—ã™ã‚‹æ—¥æ•°(æœªå…¥åŠ›ã®å ´åˆã€7æ—¥é–“)
          max_length: 48
          options: []
          required: false
          type: number
          variable: availability_number_of_date
        - label: ä¼šè­°æ™‚é–“ï¼ˆåˆ†ï¼‰
          max_length: 48
          options: []
          required: true
          type: number
          variable: conferenceTime
        - label: ãã®ä»–å¸Œæœ›
          max_length: 100
          options: []
          required: false
          type: text-input
          variable: other_request
        - label: ã‚ãªãŸã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_address
        - label: å®šæ™‚å¤–ã‚’å«ã‚ã‚‹ã‹ï¼Ÿ
          max_length: 48
          options:
          - å«ã‚ã‚‹
          - ''
          required: false
          type: select
          variable: include_out_of_business_hours
      height: 220
      id: '1724663548765'
      position:
        x: -25.037630948345395
        y: 292.3249585158701
      positionAbsolute:
        x: -25.037630948345395
        y: 292.3249585158701
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: å‚åŠ è€…ã«ã¤ã„ã¦ã®å…¥åŠ›ã‹ã‚‰ãƒªã‚¹ãƒˆã‚’æŠ½å‡º
        instruction: ''
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        parameters:
        - description: Target group for scheduling
          name: participants_list
          required: true
          type: array[string]
        query:
        - sys
        - query
        reasoning_mode: prompt
        selected: false
        title: å‚åŠ è€…ã«ã¤ã„ã¦å…¥åŠ›ã‹ã‚‰ãƒªã‚¹ãƒˆã‚’æŠ½å‡º
        type: parameter-extractor
        variables: []
      height: 126
      id: '1724664147208'
      position:
        x: 1904.905594591443
        y: 328.41704746463733
      positionAbsolute:
        x: 1904.905594591443
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '2'
          name: 'æˆ»ã‚‹ã€ã¨æŒ‡å®šã—ã¦ã„ã‚‹ã€‚

            '
        - id: '1729175083088'
          name: æ•°å­—ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚
        desc: ''
        instructions: ''
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        query_variable_selector:
        - '1724663548765'
        - sys.query
        selected: false
        title: æç¤ºã—ãŸå‚åŠ è€…ã§åŒæ„ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
        topics: []
        type: question-classifier
      height: 184
      id: '1724668674576'
      position:
        x: 886.5913758357708
        y: 685.1674218470788
      positionAbsolute:
        x: 886.5913758357708
        y: 685.1674218470788
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ç¢ºèªã„ãŸã—ã¾ã™ã­ã€‚\n\nå…¥åŠ›ã„ãŸã ã„ãŸå†…å®¹ã‹ã‚‰ã€è©²å½“ã®å‚åŠ è€…ã®å€™è£œã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸã€‚\n\n**æ•°å­—ã‚’æŒ‡å®šã—ã¦ã€è©²å½“ã®å‚åŠ è€…ã‚’ãŠé¸ã³ãã ã•ã„ï¼**\n\
          \n{{#1725414739631.output_text#}}\n\n--------\n**å›ç­”ä¾‹**\n\nâ– å‚åŠ è€…ã‚’æŒ‡å®š\n  **1,3,5**\n\
          \nâ– å‚åŠ è€…ã®å…¥åŠ›ã«æˆ»ã‚ŠãŸã„å ´åˆã€ã€Œæˆ»ã‚‹ã€ã¨å…¥åŠ›ãã ã•ã„ã€‚\n**æˆ»ã‚‹**\n\n\n\n\n\n"
        desc: å‚åŠ è€…ã‚’ç¢ºèªã™ã‚‹
        selected: false
        title: ã€STEP2 å‚åŠ è€…æŒ‡å®šã€‘
        type: answer
        variables: []
      height: 246
      id: '1724669003235'
      position:
        x: 7502.992534253385
        y: 379.1582430314195
      positionAbsolute:
        x: 7502.992534253385
        y: 379.1582430314195
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: æŠ½å‡ºã•ã‚ŒãŸå‚åŠ è€…ãƒªã‚¹ãƒˆã®å‚åŠ è€…æ¯ã«ã€ãƒŠãƒ¬ãƒƒã‚¸ã«ãŠã„ã¦æ¤œç´¢ã‚’ã‹ã‘ã€é¡ä¼¼åº¦ã®é«˜ã„ã€Œ2ã¤ã€ã‚’æŠ½å‡ºã™ã‚‹ã€‚
        height: 455.67515903740923
        iterator_selector:
        - '1724664147208'
        - participants_list
        output_selector:
        - '1725410361330'
        - output
        output_type: array[string]
        selected: false
        startNodeType: code
        start_node_id: '1725426580641'
        title: å‚åŠ è€…ã®å€™è£œã ã—
        type: iteration
        width: 2433.425650822501
      height: 456
      id: '1724671575189'
      position:
        x: 2528.001490887992
        y: 406.3305194161883
      positionAbsolute:
        x: 2528.001490887992
        y: 406.3305194161883
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 2433
      zIndex: 1
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '='
            id: 2adbc1be-1685-4d81-84bd-9771e162397a
            value: '1'
            varType: number
            variable_selector:
            - conversation
            - step
          id: 'true'
          logical_operator: and
        - case_id: 75a27092-5d4c-4658-9415-7756a2dac0d0
          conditions:
          - comparison_operator: '='
            id: 335595a0-97b2-434e-9e36-7a511dd35657
            value: '2'
            varType: number
            variable_selector:
            - conversation
            - step
          id: 75a27092-5d4c-4658-9415-7756a2dac0d0
          logical_operator: and
        - case_id: 08c1563f-2b26-417a-8809-b1c69dbf022c
          conditions:
          - comparison_operator: '='
            id: ef0e8aea-5e88-402a-b7ff-8698caab7dac
            value: '3'
            varType: number
            variable_selector:
            - conversation
            - step
          id: 08c1563f-2b26-417a-8809-b1c69dbf022c
          logical_operator: and
        desc: stepã®å€¤ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²
        selected: false
        title: stepã®å€¤ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²
        type: if-else
      height: 250
      id: '1724684610561'
      position:
        x: 341.31106643838336
        y: 292.3249585158701
      positionAbsolute:
        x: 341.31106643838336
        y: 292.3249585158701
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - step
        desc: ä¼šè©±å¤‰æ•°stepã«ç”¨æ„ã—ãŸæ•°å€¤å‹ã‚’ä»£å…¥
        input_variable_selector:
        - '1724685039114'
        - step
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®ä»£å…¥)
        type: assigner
        write_mode: over-write
      height: 160
      id: '1724684829565'
      position:
        x: 7167.41062374278
        y: 468.8847809639762
      positionAbsolute:
        x: 7167.41062374278
        y: 468.8847809639762
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(step: int) -> dict:\n    return {\n        \"step\": step\
          \ + 1\n    }\n"
        code_language: python3
        desc: STEP1ã«æ›´æ–°ã™ã‚‹ãŸã‚ã®æ•°å€¤å‹ã‚’ç”¨æ„
        outputs:
          step:
            children: null
            type: number
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®æº–å‚™)
        type: code
        variables:
        - value_selector:
          - conversation
          - step
          variable: step
      height: 82
      id: '1724685039114'
      position:
        x: 7167.41062374278
        y: 379.1582430314195
      positionAbsolute:
        x: 7167.41062374278
        y: 379.1582430314195
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        instruction: '# å‘½ä»¤

          {{#sys.query#}}ã§æŒ‡å®šã•ã‚ŒãŸæ•°å­—ã‚’ãƒªã‚¹ãƒˆã«ã—ã¦ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€Œnumã€ã«æ ¼ç´ã—ã¦ãã ã•ã„ã€‚


          # ä¾‹ï¼‘

          sys.queyâ†’ã€Œ1,2,5ã€

          num = [1,2,5]

          # ä¾‹ï¼‘

          sys.queyâ†’ã€Œ1.2.5ã€

          num = [1,2,5]


          '
        model:
          completion_params: {}
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        parameters:
        - description: ãƒ¦ãƒ¼ã‚¶ãŒæŒ‡å®šã—ãŸæ•°å­—ã®ãƒªã‚¹ãƒˆ
          name: specified_num
          required: true
          type: array[number]
        query:
        - sys
        - query
        reasoning_mode: prompt
        selected: false
        title: å‚åŠ è€…ã®æŠ½å‡º
        type: parameter-extractor
        variables: []
      height: 98
      id: '17246874287790'
      position:
        x: 1242.571023473466
        y: 873.7753195168506
      positionAbsolute:
        x: 1242.571023473466
        y: 873.7753195168506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - estimated_participants
        desc: äººç‰©ã®æ¤œç´¢çµæœã®å‡ºåŠ›ã‚’æ•´å½¢ã—ã¦ã¾ã¨ã‚ãŸã‚‚ã®ã‚’ã€ä¼šè©±å¤‰æ•°ã«è¨˜éŒ²ã€‚å¾Œã®ã€Œå‚åŠ è€…ã®å†æŠ½å‡ºã€ãƒ–ãƒ­ãƒƒã‚¯ã®éš›ã«ã€ã“ã‚Œã‚’å‚ç…§ã«ã™ã‚‹ãŸã‚ã€è¨˜éŒ²ã™ã‚‹ã€‚
        input_variable_selector:
        - '1725414739631'
        - estimated_participants
        selected: false
        title: å€™è£œè€…ãƒªã‚¹ãƒˆã®è¨˜éŒ²
        type: assigner
        write_mode: over-write
      height: 208
      id: '1724688520612'
      position:
        x: 5444.676198875003
        y: 345.57065030468493
      positionAbsolute:
        x: 5444.676198875003
        y: 345.57065030468493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(estimated_participants: list, specified_num: list, user_address:str)\
          \ -> dict:\n    # çµæœã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°ã‚’ç”¨æ„\n    output_text = \"\"\n    address_data\
          \ = []\n    new_estimated_participants = []\n\n    # æŒ‡å®šã•ã‚ŒãŸå‚åŠ è€…ã®æŠ½å‡ºå‡¦ç†\n   \
          \ for num in specified_num:\n        \n        for index, part_dict in enumerate(estimated_participants):\n\
          \            if index == (num-1):\n                # å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™\n       \
          \         output_text += f\"\\nâ–  {part_dict['department']} {part_dict['section']}ï¼š\\\
          n{part_dict['name']} : {part_dict['mail']}\\n\\n\"\n                # æŒ‡å®šã•ã‚ŒãŸå‚åŠ è€…ãƒªã‚¹ãƒˆã‚’æº–å‚™\n\
          \                new_estimated_participants.append(part_dict)\n        \
          \        # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã®æº–å‚™\n                address_data.append(part_dict['mail'])\n\
          \                break\n\n\n\n    # ãƒ¦ãƒ¼ã‚¶ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ \n    address_data.append(user_address)\n\
          \    address_string = ','.join(address_data)\n\n\n    # æŠ½å‡ºçµæœã‚’è¾æ›¸ã«ã—ã¦è¿”ã™\n \
          \   return {\n        \"output_text\": output_text,\n        \"address_data\"\
          : address_string,\n        \"new_estimated_participants\": new_estimated_participants\n\
          \    }"
        code_language: python3
        desc: äººç‰©ã®æ¤œç´¢çµæœï¼ˆJSONï¼‰ã‹ã‚‰å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã€å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆãŠã‚ˆã³ã‚¢ãƒ‰ãƒ¬ã‚¹æƒ…å ±ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ã‚’æº–å‚™ã™ã‚‹ã€‚
        outputs:
          address_data:
            children: null
            type: string
          new_estimated_participants:
            children: null
            type: array[object]
          output_text:
            children: null
            type: string
        selected: false
        title: æŒ‡å®šã•ã‚ŒãŸå‚åŠ è€…ã®ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãŠã‚ˆã³å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆæº–å‚™
        type: code
        variables:
        - value_selector:
          - conversation
          - estimated_participants
          variable: estimated_participants
        - value_selector:
          - '17246874287790'
          - specified_num
          variable: specified_num
        - value_selector:
          - '1724663548765'
          - user_address
          variable: user_address
      height: 114
      id: '1724688842940'
      position:
        x: 1601.6708561610346
        y: 873.7753195168506
      positionAbsolute:
        x: 1601.6708561610346
        y: 873.7753195168506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼é¸ã‚“ã§ã„ãŸã ã„ãŸå‚åŠ è€…ã¯ä»¥ä¸‹ã®é€šã‚Šã§ãŠé–“é•ãˆãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ\n\n{{#1724688842940.output_text#}}\n\
          \n--------\n**å›ç­”ä¾‹**\n\nâ– ã“ã®ã¾ã¾ã§è‰¯ã„å ´åˆ\n  **ã¯ã„**\n\nâ– å€™è£œã‹ã‚‰å‚åŠ è€…ã‚’æŒ‡å®šã™ã‚‹ã¨ã“ã‚ã«æˆ»ã‚ŠãŸã„å ´åˆã€ã€Œæˆ»ã‚‹ã€ã¨å…¥åŠ›ãã ã•ã„ã€‚\n\
          **æˆ»ã‚‹**"
        desc: æ¨å®šå‚åŠ è€…ãŒã‚ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚
        selected: false
        title: ã€STEP3 å‚åŠ è€…ç¢ºèªã€‘
        type: answer
        variables: []
      height: 230
      id: '1724689069361'
      position:
        x: 2552.2185507268537
        y: 873.7753195168506
      positionAbsolute:
        x: 2552.2185507268537
        y: 873.7753195168506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(step:int) -> dict:\n    return {\n        \"step\": step +\
          \ 1\n    }\n"
        code_language: python3
        desc: STEP0ã«æ›´æ–°ã™ã‚‹ãŸã‚ã®æ•°å€¤å‹ã‚’ç”¨æ„
        outputs:
          step:
            children: null
            type: number
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®æº–å‚™)
        type: code
        variables:
        - value_selector:
          - conversation
          - step
          variable: step
      height: 82
      id: '1724689981216'
      position:
        x: 1249.4632136034484
        y: 1576.8160474451417
      positionAbsolute:
        x: 1249.4632136034484
        y: 1576.8160474451417
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - step
        desc: ä¼šè©±å¤‰æ•°stepã«ç”¨æ„ã—ãŸæ•°å€¤å‹ã‚’ä»£å…¥
        input_variable_selector:
        - '1724689981216'
        - step
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®ä»£å…¥)
        type: assigner
        write_mode: over-write
      height: 160
      id: '1724690070424'
      position:
        x: 1249.4632136034484
        y: 1659.5223290049282
      positionAbsolute:
        x: 1249.4632136034484
        y: 1659.5223290049282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - address
        desc: 'äººç‰©ã®æ¤œç´¢çµæœã‹ã‚‰ã«æŠ½å‡ºã—ãŸã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¼šè©±å¤‰æ•°ã«è¨˜éŒ²ã™ã‚‹ã€‚å¾Œã«ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æƒ…å ±ã‹ã‚‰äºˆå®šå–å¾—ã‚’ã™ã‚‹ãŸã‚å¿…è¦ã€‚

          '
        input_variable_selector:
        - '1724688842940'
        - address_data
        selected: false
        title: æŒ‡å®šã•ã‚ŒãŸå‚åŠ è€…ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨˜éŒ²
        type: assigner
        write_mode: over-write
      height: 192
      id: '1724690805594'
      position:
        x: 1904.905594591443
        y: 873.7753195168506
      positionAbsolute:
        x: 1904.905594591443
        y: 873.7753195168506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - conversation
          - available_times
        desc: æŠ½å‡ºã•ã‚ŒãŸå…±é€šç©ºãæ™‚é–“ã‹ã‚‰ã€ãƒ¦ãƒ¼ã‚¶ã®ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸç©ºãæ™‚é–“ã‚’æŠ½å‡ºã™ã‚‹ã€‚
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        prompt_template:
        - id: 6ce51b9d-0849-4c8a-801e-1eda99f432e6
          role: system
          text: "# å‘½ä»¤\nå–å¾—ã—ãŸå…±é€šã®ç©ºãæ™‚é–“ã®ä¸­ã‹ã‚‰æœ€å¤§3ã¤é¸ã³ã€æç¤ºã—ã¦ãã ã•ã„ã€‚ç„¦ã£ã¦ç­”ãˆã¯å‡ºã•ãšã€æ™‚é–“ã‚’ã‹ã‘ã¦æ…é‡ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            \n# å…±é€šã®ç©ºãæ™‚é–“\n{{#context#}}\n\n# æ‰‹é †\n1. ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\nã€€1-1 ç©ºãæ™‚é–“ï¼ˆxx:xx-xx:xxï¼‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆ\n\
            ã€€ã€€æ¬¡ã®æ‰‹é †2ã«é€²ã‚“ã§ãã ã•ã„ã€‚\nã€€1-2 ç©ºãæ™‚é–“ï¼ˆxx:xx-xx:xxï¼‰ãŒå­˜åœ¨ã—ãªã„å ´åˆ\nã€€ã€€ã€Œå‡ºåŠ›ä¾‹1ã€ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            2. ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã€Œã€Œãã®ä»–è¦æœ›ã€ã‚’å—ã‘å–ã£ãŸã‹ï¼Ÿ\nã€€2-1 å—ã‘å–ã£ãŸå ´åˆ\nã€€ã€€ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’å‚ç…§ã—ã€ãƒ¦ãƒ¼ã‚¶ã®å¸Œæœ›ã«ã‚ã£ãŸæ—¥æ™‚ã‚’æœ€å¤§ï¼“ã¤é¸æŠã—ã¦ãã ã•ã„ã€‚å¸Œæœ›ã«æ²¿ã£ãŸæ—¥æ™‚ãŒï¼‘ã¤ã‚‚ãªã„å ´åˆã€ã€€ã€Œå‡ºåŠ›ä¾‹1ã€ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            ã€€2-2 å—ã‘å–ã£ã¦ãªã„å ´åˆ\nã€€ã€€ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’å‚ç…§ã—ã€ä¸€ç•ªæ—©ã„æ—¥ä»˜ã‹ã‚‰ï¼“ã¤é¸æŠã—ã¦ãã ã•ã„ã€‚\n3. ã€Œå‡ºåŠ›å½¢å¼ã€ã¨ã€Œå‡ºåŠ›ä¾‹2ã€ã«æ²¿ã£ã¦ã€é¸æŠã—ãŸ3ã¤ã®ç©ºãæ™‚é–“ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\
            \ \n\n\n# ãã®ä»–è¦æœ›\n{{#1724663548765.other_request#}}\n{{#sys.query#}}\n\n\
            # å‡ºåŠ›å½¢å¼\nä»¥ä¸‹ã¯å‚åŠ è€…ã®å…±é€šã®ç©ºãæ™‚é–“ã§ã™ã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä¼šè­°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\
            \n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\n\n# å‡ºåŠ›ä¾‹1\né©ã—ãŸç©ºãæ™‚é–“ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\n\n**ãªãŠã€å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æ¢ã—ã€æç¤ºã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚**\n\
            \n# å‡ºåŠ›ä¾‹2\nä»¥ä¸‹ã¯å‚åŠ è€…ã®å…±é€šã®ç©ºãæ™‚é–“ã§ã™ã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä¼šè­°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\n[2024å¹´6æœˆ6æ—¥ 16:00-16:30](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:00:00&enddt=2024-06-06T16:30:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n\
            \n[2024å¹´6æœˆ6æ—¥ 16:15-16:45](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:15:00&enddt=2024-06-06T16:45:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n\
            \n[2024å¹´6æœˆ6æ—¥ 16:30-17:00](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:30:00&enddt=2024-06-06T17:00:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n"
        selected: false
        title: ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸå…±é€šç©ºãæ™‚é–“ã‚’æŠ½å‡º
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: true
      height: 142
      id: '1724716277005'
      position:
        x: 3388.539861503168
        y: 2245.2171745319943
      positionAbsolute:
        x: 3388.539861503168
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'äº†è§£ã—ã¾ã—ãŸï¼ã§ã¯ã€çš†ã•ã‚“ã®ç©ºã„ã¦ã„ã‚‹æ™‚é–“ã‚’ç¢ºèªã—ã¾ã™ã­ã€‚

          å°‘ã€…ãŠå¾…ã¡ãã ã•ã„â€¦



          {{#1724716277005.text#}}


          ä»–ã«ã”å¸Œæœ›ã‚„èª¿æ•´äº‹é …ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ


          --------

          **å›ç­”ä¾‹**

          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„

          '
        desc: æŠ½å‡ºã•ã‚ŒãŸç©ºãæ™‚é–“ã¨ãã®ãƒªãƒ³ã‚¯ã‚’æç¤ºã™ã‚‹ã€‚
        selected: false
        title: å…±é€šç©ºãæ™‚é–“ã‚’æç¤º
        type: answer
        variables: []
      height: 230
      id: '1724717284776'
      position:
        x: 3686.5258535916523
        y: 2245.2171745319943
      positionAbsolute:
        x: 3686.5258535916523
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 903f12f9-5b58-4a7b-ba4d-0003d6178fb1
            value: ''
            varType: array[object]
            variable_selector:
            - '1732143228684'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        isInIteration: true
        iteration_id: '1724671575189'
        selected: false
        title: æ¤œç´¢çµæœã¯ç©ºã‹ï¼Ÿ
        type: if-else
      extent: parent
      height: 126
      id: '1725342628745'
      parentId: '1724671575189'
      position:
        x: 715.6226996181103
        y: 90.7887448470492
      positionAbsolute:
        x: 3243.6241905061024
        y: 497.1192642632375
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "\ndef main(data: list, item: str, user_dept:str) -> dict:\n    # æœ€çµ‚å‡ºåŠ›ã®ãƒªã‚¹ãƒˆã‚’æº–å‚™\n\
          \    result_list = []\n\n    # éƒ¨é–€ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†é¡\n    priority_part = []\n   \
          \ other_part = []\n\n\n    # ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºå‡¦ç†\n    for entry in data:\n        content\
          \ = entry[\"content\"]\n        \n        # ã‚»ãƒŸã‚³ãƒ­ãƒ³ã§åˆ†å‰²\n        pairs = content.split(';')\n\
          \n        # æ¤œç´¢çµæœã®äººã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€è¾æ›¸ã«å¤‰æ›\n        result_dict = {}\n        for pair\
          \ in pairs:\n            key, value = pair.split(':', 1)  # æœ€åˆã®ã‚³ãƒ­ãƒ³ã§åˆ†å‰²\n\
          \            key = key.strip().strip('\"')  # ã‚­ãƒ¼ã®å‰å¾Œã®ç©ºç™½ã¨äºŒé‡å¼•ç”¨ç¬¦ã‚’å‰Šé™¤\n      \
          \      value = value.strip().strip('\"')  # å€¤ã®å‰å¾Œã®ç©ºç™½ã¨äºŒé‡å¼•ç”¨ç¬¦ã‚’å‰Šé™¤\n         \
          \   result_dict[key] = value\n        \n        # å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŠ½å‡º\n        department\
          \ = result_dict[\"éƒ¨\"]\n        section = result_dict[\"èª²\"]\n        mail\
          \ = result_dict[\"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\"]\n        name = result_dict[\"æ°å\"]\n\n   \
          \     # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸæƒ…å ±ã‚’ä½œæˆ\n        formatted_dict = {\"department\":department,\
          \ \"section\":section, \"mail\":mail, \"name\":name, \"keyword\":item}\n\
          \        \n        # ãƒ¦ãƒ¼ã‚¶ã¨åŒã˜ã®éƒ¨ã®å ´åˆã¯å„ªå…ˆãƒªã‚¹ãƒˆã«ã€ãã‚Œä»¥å¤–ã¯é€šå¸¸ãƒªã‚¹ãƒˆã«è¿½åŠ \n        if department\
          \ == user_dept:\n            priority_part.append(formatted_dict)\n    \
          \    else:\n            other_part.append(formatted_dict)\n    \n    # ãƒªã‚¹ãƒˆã®é€£çµ\n\
          \    result_list = priority_part + other_part\n\n    # æŠ½å‡ºçµæœã‚’è¾æ›¸ã«ã—ã¦è¿”ã™\n  \
          \  return {\n        \"result_list\": result_list,\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1724671575189'
        outputs:
          result_list:
            children: null
            type: array[object]
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒˆæ¤œç´¢ï¼‰
        type: code
        variables:
        - value_selector:
          - '1732143337675'
          - result
          variable: data
        - value_selector:
          - '1724671575189'
          - item
          variable: item
        - value_selector:
          - '1725583035244'
          - user_department
          variable: user_dept
      extent: parent
      height: 54
      id: '1725347210853'
      parentId: '1724671575189'
      position:
        x: 1462.0197088335694
        y: 90.22330337977667
      positionAbsolute:
        x: 3990.0211997215615
        y: 496.55382279596495
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "\ndef main(data: list, item: str, user_dept:str) -> dict:\n    # æœ€çµ‚å‡ºåŠ›ã®ãƒªã‚¹ãƒˆã‚’æº–å‚™\n\
          \    result_list = []\n\n    # éƒ¨é–€ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†é¡\n    priority_part = []\n   \
          \ other_part = []\n\n\n    # ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºå‡¦ç†\n    for entry in data:\n        content\
          \ = entry[\"content\"]\n        \n        # ã‚»ãƒŸã‚³ãƒ­ãƒ³ã§åˆ†å‰²\n        pairs = content.split(';')\n\
          \n        # æ¤œç´¢çµæœã®äººã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€è¾æ›¸ã«å¤‰æ›\n        result_dict = {}\n        for pair\
          \ in pairs:\n            key, value = pair.split(':', 1)  # æœ€åˆã®ã‚³ãƒ­ãƒ³ã§åˆ†å‰²\n\
          \            key = key.strip().strip('\"')  # ã‚­ãƒ¼ã®å‰å¾Œã®ç©ºç™½ã¨äºŒé‡å¼•ç”¨ç¬¦ã‚’å‰Šé™¤\n      \
          \      value = value.strip().strip('\"')  # å€¤ã®å‰å¾Œã®ç©ºç™½ã¨äºŒé‡å¼•ç”¨ç¬¦ã‚’å‰Šé™¤\n         \
          \   result_dict[key] = value\n        \n        # å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŠ½å‡º\n        department\
          \ = result_dict[\"éƒ¨\"]\n        section = result_dict[\"èª²\"]\n        mail\
          \ = result_dict[\"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\"]\n        name = result_dict[\"æ°å\"]\n\n   \
          \     # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸæƒ…å ±ã‚’ä½œæˆ\n        formatted_dict = {\"department\":department,\
          \ \"section\":section, \"mail\":mail, \"name\":name, \"keyword\":item}\n\
          \        \n        # ãƒ¦ãƒ¼ã‚¶ã¨åŒã˜ã®éƒ¨ã®å ´åˆã¯å„ªå…ˆãƒªã‚¹ãƒˆã«ã€ãã‚Œä»¥å¤–ã¯é€šå¸¸ãƒªã‚¹ãƒˆã«è¿½åŠ \n        if department\
          \ == user_dept:\n            priority_part.append(formatted_dict)\n    \
          \    else:\n            other_part.append(formatted_dict)\n    \n    # ãƒªã‚¹ãƒˆã®é€£çµ\n\
          \    result_list = priority_part + other_part\n\n    # æŠ½å‡ºçµæœã‚’è¾æ›¸ã«ã—ã¦è¿”ã™\n  \
          \  return {\n        \"result_list\": result_list,\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1724671575189'
        outputs:
          result_list:
            children: null
            type: array[object]
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼‰
        type: code
        variables:
        - value_selector:
          - '1732143228684'
          - result
          variable: data
        - value_selector:
          - '1724671575189'
          - item
          variable: item
        - value_selector:
          - '1725583035244'
          - user_department
          variable: user_dept
      extent: parent
      height: 54
      id: '1725410246681'
      parentId: '1724671575189'
      position:
        x: 1075.9712645762743
        y: 288.67515903740923
      positionAbsolute:
        x: 3603.9727554642664
        y: 695.0056784535975
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1724671575189'
        output_type: string
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®å¤‰æ•°é›†ç´„
        type: variable-aggregator
        variables:
        - - '1725410246681'
          - result_list
        - - '1725347210853'
          - result_list
      extent: parent
      height: 138
      id: '1725410361330'
      parentId: '1724671575189'
      position:
        x: 2031.7931190346003
        y: 88.31950791077293
      positionAbsolute:
        x: 4559.794609922592
        y: 494.6500273269612
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(data: list) -> dict:\n\n    output_text = \"\
          \"\n    keyword = \"\"\n    estimated_participants = []\n\n    for index,\
          \ part_dict in enumerate(data):\n        \n        num = index + 1 \n\n\
          \        if part_dict[\"keyword\"] != keyword:\n            keyword = part_dict[\"\
          keyword\"]\n            output_text += f\"--------\\nã€Œ{keyword}ã€\\nä»¥ä¸‹ã‹ã‚‰å€™è£œã‚’é¸ã‚“ã§ãã ã•ã„ã€‚\\\
          n\"\n\n        # å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™\n        output_text += f\"\\n{num}. {part_dict['department']}\
          \ {part_dict['section']}ï¼š\\n{part_dict['name']} : {part_dict['mail']}\\\
          n\\n\"\n\n        # å€™è£œè€…ãƒªã‚¹ãƒˆã®æº–å‚™\n        estimated_participants.append(part_dict)\n\
          \n    return {\n        \"output_text\": output_text,\n        \"estimated_participants\"\
          : estimated_participants\n    }"
        code_language: python3
        desc: ''
        outputs:
          estimated_participants:
            children: null
            type: array[object]
          output_text:
            children: null
            type: string
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã¨å€™è£œè€…ãƒªã‚¹ãƒˆã®æº–å‚™
        type: code
        variables:
        - value_selector:
          - '1724671575189'
          - output
          variable: data
      height: 54
      id: '1725414739631'
      position:
        x: 5118.19852250873
        y: 345.57065030468493
      positionAbsolute:
        x: 5118.19852250873
        y: 345.57065030468493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(item: str) -> dict:\n    # åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å–ã‚Šé™¤ã\n    no_space_item\
          \ = item.replace(' ', '')\n    # å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å–ã‚Šé™¤ã\n    no_space_item = no_space_item.replace('ã€€',\
          \ '')\n    return {\n        \"no_space_item\": no_space_item\n    }\n"
        code_language: python3
        desc: ãƒ•ãƒ«ãƒãƒ¼ãƒ ã«ã‚ˆã‚‹æ¤œç´¢ã¯ã‚¹ãƒšãƒ¼ã‚¹ãŒã‚ã‚‹ã¨æ©Ÿèƒ½ã—ãªã„ãŸã‚
        isInIteration: true
        isIterationStart: true
        iteration_id: '1724671575189'
        outputs:
          no_space_item:
            children: null
            type: string
        selected: false
        title: ã‚¹ãƒšãƒ¼ã‚¹ã®å‰Šé™¤
        type: code
        variables:
        - value_selector:
          - '1724671575189'
          - item
          variable: item
      extent: parent
      height: 98
      id: '1725426580641'
      parentId: '1724671575189'
      position:
        x: 115.25889887340782
        y: 90.7411011265923
      positionAbsolute:
        x: 2643.2603897614
        y: 497.0716205427806
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 11d5b69d-e6a7-4ec0-8b00-4be582df112f
            value: ''
            varType: array[object]
            variable_selector:
            - '1732142701121'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ã®æ¤œç´¢çµæœã¯ç©ºã‹ï¼Ÿ
        type: if-else
      height: 126
      id: '1725582909443'
      position:
        x: 1249.4632136034484
        y: 328.41704746463733
      positionAbsolute:
        x: 1249.4632136034484
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'é–‹å§‹ç”»é¢ã§å…¥åŠ›ã„ãŸã ã„ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸æ­£ã®ã‚ˆã†ã§ã™ã€‚


          ç”»é¢ä¸Šéƒ¨ã®ã€Œãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¯ã€ã‹ã‚‰ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å†è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚'
        desc: ''
        selected: false
        title: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹è¨˜å…¥ãƒŸã‚¹
        type: answer
        variables: []
      height: 152
      id: '1725582938057'
      position:
        x: 1558.014415819086
        y: 94.95389703738869
      positionAbsolute:
        x: 1558.014415819086
        y: 94.95389703738869
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(data: list) -> dict:\n    user_department = \"\"\n\n    #\
          \ ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºå‡¦ç†\n    for entry in data:\n        content = entry[\"content\"\
          ]\n        \n        # å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŠ½å‡º\n        department = content.split(\"\
          \\\"éƒ¨\\\":\\\"\")[1].split(\"\\\"\")[0]\n        \n        # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸè¡Œã‚’ä½œæˆã—ã€æ–‡å­—åˆ—ã«è¿½åŠ \n\
          \        user_department = department\n        \n\n    # æŠ½å‡ºçµæœã‚’è¾æ›¸ã«ã—ã¦è¿”ã™\n\
          \    return {\n        \"user_department\": user_department,\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          user_department:
            children: null
            type: string
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ã®éƒ¨æƒ…å ±ã®æŠ½å‡º
        type: code
        variables:
        - value_selector:
          - '1732142701121'
          - result
          variable: data
      height: 54
      id: '1725583035244'
      position:
        x: 1558.014415819086
        y: 328.41704746463733
      positionAbsolute:
        x: 1558.014415819086
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 7c72f864-a1d8-4911-b412-3d1a68b3f694
            value: ''
            varType: array[string]
            variable_selector:
            - '1724664147208'
            - participants_list
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: å‚åŠ è€…ãƒªã‚¹ãƒˆã¯ç©ºã‹ï¼Ÿ
        type: if-else
      height: 126
      id: '1725592441269'
      position:
        x: 2233.1813405116545
        y: 328.41704746463733
      positionAbsolute:
        x: 2233.1813405116545
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ã¾ãšã¯ä»Šå›ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å‚åŠ ã™ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚


          --------

          **å›ç­”ä¾‹**


          - æ± ç”°ä¿®ä¸€ã€è‡ªå‹•è»Šã®é£¯å¡š

          - ikeda,iizuka

          '
        desc: ''
        selected: false
        title: å‚åŠ è€…ã®å†æŒ‡å®š
        type: answer
        variables: []
      height: 136
      id: '1725592467979'
      position:
        x: 2616.0091972199707
        y: 94.95389703738869
      positionAbsolute:
        x: 2616.0091972199707
        y: 94.95389703738869
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "from datetime import datetime, timedelta, timezone\n\ndef conver_startdate(date_str):\n\
          \    # å…¥åŠ›æ—¥ä»˜æ–‡å­—åˆ—ã‚’ datetime ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n    dt = datetime.strptime(date_str,\
          \ \"%Y/%m/%d\")\n    \n    # æ—¥æœ¬æ™‚é–“ã®00:00:00ã«è¨­å®š\n    dt = dt.replace(hour=0,\
          \ minute=0, second=0)\n    \n    # æ—¥æœ¬æ™‚é–“ (JST) ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®š (+9æ™‚é–“)\n    jst\
          \ = timezone(timedelta(hours=9))\n    \n    # JSTã‚’ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ã—ã¦ä»˜åŠ \n    jst_dt\
          \ = dt.replace(tzinfo=jst)\n    \n    # UTC ã«å¤‰æ›\n    utc_dt = jst_dt.astimezone(timezone.utc)\n\
          \    \n    # ISO 8601 å½¢å¼ã§è¿”ã™\n    return utc_dt.strftime(\"%Y-%m-%dT%H:%M:%SZ\"\
          )\n\ndef conver_enddate(date_str: str, numberOfDate: int):\n    # å…¥åŠ›æ—¥ä»˜æ–‡å­—åˆ—ã‚’\
          \ datetime ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n    dt = datetime.strptime(date_str, \"%Y/%m/%d\"\
          )\n    \n    # æ—¥æœ¬æ™‚é–“ã®23:59:59ã«è¨­å®š\n    dt = dt.replace(hour=23, minute=59,\
          \ second=59)\n    \n    # æ—¥æœ¬æ™‚é–“ (JST) ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®š (+9æ™‚é–“)\n    jst = timezone(timedelta(hours=9))\n\
          \    \n    # JSTã‚’ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ã—ã¦ä»˜åŠ \n    jst_dt = dt.replace(tzinfo=jst)\n    \n\
          \    # UTC ã«å¤‰æ›\n    utc_dt = jst_dt.astimezone(timezone.utc)\n\n    # NumberOfDateã‚’åŠ ç®—\n\
          \    end_datetime = utc_dt + timedelta(days=numberOfDate - 1)\n    \n  \
          \  # ISO 8601 å½¢å¼ã§è¿”ã™\n    return end_datetime.strftime(\"%Y-%m-%dT%H:%M:%SZ\"\
          )\n    \ndef get_end_datetime(days: int) -> str:\n    # ç¾åœ¨ã®æ—¥æ™‚ã‚’UTCã§å–å¾—\n \
          \   now = datetime.now(timezone.utc)\n    \n    # æ—¥æœ¬æ™‚é–“ (JST) ã«å¤‰æ›\n    jst\
          \ = timezone(timedelta(hours=9))\n    now_jst = now.astimezone(jst)\n  \
          \  \n    # ç¾åœ¨ã®æ—¥ä»˜ã®00:00:00 (æ—¥æœ¬æ™‚é–“) ã‚’ä½œæˆ\n    midnight_jst = datetime(now_jst.year,\
          \ now_jst.month, now_jst.day, 0, 0, 0, tzinfo=jst)\n    \n    \n    # æŒ‡å®šã•ã‚ŒãŸæ—¥æ•°å¾Œã®æ—¥æ™‚ã‚’è¨ˆç®—\
          \ (æ—¥æœ¬æ™‚é–“)\n    future_date_jst = midnight_jst + timedelta(days=days + 1)\n\
          \    \n    # 1ç§’ã‚’å¼•ã„ã¦23:59:59ã«è¨­å®š\n    future_date_minus_one_second_jst = future_date_jst\
          \ - timedelta(seconds=1)\n    \n    # UTCã«å¤‰æ›\n    future_date_utc = future_date_minus_one_second_jst.astimezone(timezone.utc)\n\
          \    \n    # æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    return future_date_utc.strftime('%Y-%m-%dT%H:%M:%SZ')\n\
          \ndef get_start_datetime() -> str:\n    # ç¾åœ¨ã®æ—¥æ™‚ã‚’UTCã§å–å¾—\n    now = datetime.now(timezone.utc)\n\
          \    # ç¾åœ¨ã®æ—¥ä»˜ã®00:00:00ã‚’ä½œæˆ\n    # midnight = datetime(now.year, now.month,\
          \ now.day, 0, 0, 0, tzinfo=timezone.utc)\n    # æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    return\
          \ now.strftime('%Y-%m-%dT%H:%M:%SZ')\n\ndef convert_iso2text(iso_date_text)\
          \ -> dict:\n    # ISO8601å½¢å¼ã®æ—¥ä»˜ã‚’ãƒ‘ãƒ¼ã‚¹\n    dt = datetime.strptime(iso_date_text,\
          \ '%Y-%m-%dT%H:%M:%SZ')\n    # UTCã‹ã‚‰9æ™‚é–“ã‚’åŠ ãˆã¦æ—¥æœ¬æ™‚é–“ã«å¤‰æ›\n    jst_dt = dt + timedelta(hours=9)\n\
          \    # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦è¿”ã™\n    return jst_dt.strftime(\"%Y/%m/%d\")\n\n\ndef main(start_date,\
          \ number_of_date) -> dict:\n\n    #number_of_dateãŒç©ºã®å ´åˆã« 7 ã‚’ã‚»ãƒƒãƒˆã™ã‚‹\n    number_of_date\
          \ = number_of_date if number_of_date else 7\n\n    #ç©ºãæ™‚é–“å–å¾—é–‹å§‹æ—¥ã‚’æ±ºã‚ã‚‹\n    start_datetime\
          \ = conver_startdate(start_date) if start_date else get_start_datetime()\n\
          \    \n    #ç©ºãæ™‚é–“å–å¾—çµ‚äº†æ—¥ã‚’æ±ºã‚ã‚‹\n    end_datetime = conver_enddate(start_date,\
          \ number_of_date) if start_date else get_end_datetime(number_of_date) \n\
          \n    return {\n        \"start_datetime_iso\": start_datetime,\n      \
          \  \"end_datetime_iso\": end_datetime,\n        \"start_date\": convert_iso2text(start_datetime),\n\
          \        \"end_date\": convert_iso2text(end_datetime),\n\n    }"
        code_language: python3
        desc: ''
        outputs:
          end_date:
            children: null
            type: string
          end_datetime_iso:
            children: null
            type: string
          start_date:
            children: null
            type: string
          start_datetime_iso:
            children: null
            type: string
        selected: false
        title: èª¿æ•´æœŸé–“ã®å–å¾—
        type: code
        variables:
        - value_selector:
          - '1724663548765'
          - availability_start_date
          variable: start_date
        - value_selector:
          - '1724663548765'
          - availability_number_of_date
          variable: number_of_date
      height: 54
      id: '1727251498456'
      position:
        x: 1540.8608129790389
        y: 1955.7451890727411
      positionAbsolute:
        x: 1540.8608129790389
        y: 1955.7451890727411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: 'grant_type:client_credentials

            client_id:{{#env.client_id#}}

            scope:https://graph.microsoft.com/.default

            client_secret:{{#env.client_secret#}}'
          type: form-data
        desc: ''
        headers: Content-Type:application/x-www-form-urlencoded
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
        type: http-request
        url: https://login.microsoftonline.com/{{#env.tenant_id#}}/oauth2/v2.0/token
        variables: []
      height: 124
      id: '1727251707110'
      position:
        x: 1856.4557310506018
        y: 1955.7451890727411
      positionAbsolute:
        x: 1856.4557310506018
        y: 1955.7451890727411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(response: int) -> dict:\n    # JSONãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦è¾æ›¸ã«å¤‰æ›\n   \
          \ token_data = json.loads(response)\n\n    # ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–ã‚Šå‡ºã™\n    access_token\
          \ = token_data.get('access_token')\n\n    return {\n        \"access_token\"\
          : access_token\n    }"
        code_language: python3
        desc: ''
        outputs:
          access_token:
            children: null
            type: string
        selected: false
        title: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¤‰æ•°ã«ã‚»ãƒƒãƒˆ
        type: code
        variables:
        - value_selector:
          - '1727251707110'
          - body
          variable: response
      height: 54
      id: '1727251822339'
      position:
        x: 2161.7752389613743
        y: 1955.7451890727411
      positionAbsolute:
        x: 2161.7752389613743
        y: 1955.7451890727411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(emails,start_datetime,end_datetime) -> dict:\n\n    # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒªã‚¹ãƒˆ\n\
          \    email_list = emails.split(\",\")\n\n    # ã‚¤ãƒ™ãƒ³ãƒˆã®æœŸé–“ï¼ˆISO 8601å½¢å¼ï¼‰\n   \
          \ start_date = start_datetime\n    end_date = end_datetime\n\n    # ãƒãƒƒãƒãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’ä½œæˆ\n\
          \    requests_payload = []\n    for i, email in enumerate(email_list):\n\
          \        requests_payload.append({\n            \"id\": str(i + 1),\n  \
          \          \"method\": \"GET\",\n            \"url\": f\"/users/{email}/calendarview?startDateTime={start_date}&endDateTime={end_date}&$filter=isCancelled\
          \ eq false&top=100&$select=subject,start,end,attendees,sensitivity,showAs,isAllDay,type,location\"\
          \n        })\n\n    batch_payload = {\n        \"requests\": requests_payload\n\
          \    }\n\n    # JSONå½¢å¼ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’å‡ºåŠ›\n    payload = json.dumps(batch_payload,\
          \ indent=2)\n\n    return {\n        \"result\": payload,\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ä½œæˆï¼ˆã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ï¼‰
        type: code
        variables:
        - value_selector:
          - conversation
          - address
          variable: emails
        - value_selector:
          - '1727251498456'
          - start_datetime_iso
          variable: start_datetime
        - value_selector:
          - '1727251498456'
          - end_datetime_iso
          variable: end_datetime
      height: 54
      id: '1727251901797'
      position:
        x: 2445.055306906956
        y: 1955.7451890727411
      positionAbsolute:
        x: 2445.055306906956
        y: 1955.7451890727411
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: '{{#1727251901797.result#}}'
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#1727251822339.access_token#}}

          Content-Type:application/json'
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æƒ…å ±ã‚’å–å¾—ï¼ˆãƒãƒƒãƒï¼‰
        type: http-request
        url: https://graph.microsoft.com/v1.0/$batch
        variables: []
      height: 106
      id: '1727252035654'
      position:
        x: 2743.779160660655
        y: 1955.7451890727411
      positionAbsolute:
        x: 2743.779160660655
        y: 1955.7451890727411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "from datetime import datetime, timedelta\nfrom collections import defaultdict\n\
          import re\n\n# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹\ndef decode_email(encoded_email):\n    decoding_map\
          \ = {\n        '%40': '@','%2E': '.','%2D': '-','%5F': '_','%2B': '+','%25':\
          \ '%','%20': ' '\n    }\n    \n    decoded_email = encoded_email\n    for\
          \ encoded_char, decoded_char in decoding_map.items():\n        decoded_email\
          \ = decoded_email.replace(encoded_char, decoded_char)\n    \n    return\
          \ decoded_email\n\n# ä»»æ„å‚åŠ ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹\ndef check_optional(attendees, target_email)\
          \ -> bool:\n    if not attendees:\n        return False\n    \n    for attendee\
          \ in attendees:\n        if attendee.get('type') == 'optional' and attendee['emailAddress']['address']\
          \ == target_email:\n            return True\n    \n    return False\n\n\n\
          def main(response) -> dict:\n\n    # å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¦æ•´ç†\n    extracted_events\
          \ = {}\n    result = defaultdict(lambda: defaultdict(list))\n\n    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è§£æ\n\
          \    responses = json.loads(response)['responses']\n    for response in\
          \ responses:\n        events = response['body']['value']\n        for event\
          \ in events:\n            # email = event['organizer']['emailAddress']['address']\n\
          \n            # æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŠ½å‡º\n            email_pattern = r\"users\\\
          ('([^']+)'\\)\"\n            match = re.search(email_pattern, response['body']['@odata.context'])\n\
          \            # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰\n            email = decode_email(match.group(1))\n\
          \n            if event['sensitivity'] == 'private':\n                subject\
          \ = 'private'\n            else:\n                subject = event['subject']\n\
          \            start_time = event['start']['dateTime']\n            end_time\
          \ = event['end']['dateTime']\n           \n            # ISOãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ—¥æ™‚ã‚’æ­£è¦åŒ–\n\
          \            start_time = re.sub(r'\\.\\d+', '', start_time) + \"Z\"\n \
          \           end_time = re.sub(r'\\.\\d+', '', end_time) + \"Z\"\n      \
          \      \n            # datetimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n            start_dt = datetime.fromisoformat(start_time.replace(\"\
          Z\", \"+00:00\"))\n            end_dt = datetime.fromisoformat(end_time.replace(\"\
          Z\", \"+00:00\"))\n            \n            # 9æ™‚é–“åŠ ç®—\n            start_dt\
          \ += timedelta(hours=9)\n            end_dt += timedelta(hours=9)\n    \
          \        \n            # æ—¥ä»˜ã ã‘ã‚’æŠ½å‡º\n            start_date = start_dt.date().isoformat()\n\
          \            end_date = end_dt.date().isoformat()\n            \n      \
          \      # æ™‚é–“ã¨åˆ†ã ã‘ã‚’æŠ½å‡º\n            start_hour = start_dt.strftime('%H:%M')\n\
          \            end_hour = end_dt.strftime('%H:%M')\n\n            # çµ‚æ—¥ã®äºˆå®šã ã£ãŸå ´åˆã«ã€é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»ã‚’è¨­å®š\n\
          \            if event['isAllDay']:\n                start_hour = \"00:00\"\
          \n                end_hour = \"23:59\"\n\n            attendees = event['attendees']\n\
          \            is_optional = check_optional(attendees, email)\n\n        \
          \    result[email][start_date].append({\n                \"subject\": subject,\n\
          \                \"start\": start_hour,\n                \"end\": end_hour,\n\
          \                \"isOptional\": is_optional,\n                \"showAs\"\
          :event['showAs'],\n                \"isAllDay\":event['isAllDay'],\n   \
          \             \"type\":event['type'],\n                \"location\":event['location']['displayName'],\n\
          \            })\n\n    # çµæœã‚’JSONå½¢å¼ã§è¡¨ç¤º\n    events = json.dumps(result,ensure_ascii=False)\n\
          \n    return {\n        \"calendar\": events,\n    }"
        code_language: python3
        desc: ''
        outputs:
          calendar:
            children: null
            type: string
        selected: false
        title: ã‚¤ãƒ™ãƒ³ãƒˆåŠ å·¥
        type: code
        variables:
        - value_selector:
          - '1727252035654'
          - body
          variable: response
      height: 54
      id: '1727252112266'
      position:
        x: 3064.4557310506016
        y: 1955.7451890727411
      positionAbsolute:
        x: 3064.4557310506016
        y: 1955.7451890727411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        author: difyadmin
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰äºˆå®šå–å¾—","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1727252215290'
      position:
        x: 1242.571023473466
        y: 1934.6868075196137
      positionAbsolute:
        x: 1242.571023473466
        y: 1934.6868075196137
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        code: "\ndef main(based_on_business_hours) -> dict:\n\n    workingTime = \"\
          09:00-17:30\" if based_on_business_hours == \"True\" else \"07:00-22:00\"\
          \n\n    return {\n        \"exclusion_times\" : \"12:00-13:00\",\n     \
          \   \"working_times\" : workingTime,\n        \"holidays\":[\n        '2024-01-01',\
          \ '2024-01-08', '2024-02-11',\n        '2024-02-12', '2024-02-23', '2024-03-20',\
          \ '2024-04-29', '2024-05-03',\n        '2024-05-04', '2024-05-05', '2024-05-06',\
          \ '2024-07-15', '2024-08-11',\n        '2024-08-12', '2024-09-16', '2024-09-22',\
          \ '2024-09-23', '2024-10-14',\n        '2024-11-03', '2024-11-04', '2024-11-23'\n\
          \        ] \n    }"
        code_language: python3
        desc: ''
        outputs:
          exclusion_times:
            children: null
            type: string
          holidays:
            children: null
            type: array[string]
          working_times:
            children: null
            type: string
        selected: false
        title: ç¥æ—¥ãƒ»å®šæ™‚ã®è¨­å®š
        type: code
        variables:
        - value_selector:
          - conversation
          - based_on_business_hours
          variable: based_on_business_hours
      height: 54
      id: '1727252290226'
      position:
        x: 1820.7530155529084
        y: 2245.2171745319943
      positionAbsolute:
        x: 1820.7530155529084
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nfrom datetime import datetime, timezone, timedelta\n\n\
          \ndef get_current_time_dict():\n    \"\"\"ç¾åœ¨ã®æ™‚åˆ»ã‚’è¾æ›¸å‹ã«å¤‰æ›ã—ã¾ã™ã€‚\"\"\"\n    current_time\
          \ = datetime.now(timezone(timedelta(hours=+9)))\n\n    # åˆ†ã‚’æœ€ã‚‚è¿‘ã„30åˆ†å˜ä½ã«ä¸¸ã‚ã‚‹\n\
          \    rounded_minute = 30 if current_time.minute >= 30 else 0\n    current_time_str\
          \ = f\"{current_time.hour:02d}:{rounded_minute:02d}\"\n    ranges = []\n\
          \    ranges.append({\"start\": \"00:00\", \"end\": current_time_str, 'showAs':\
          \ \"busy\", 'isAllDay': False})\n        \n    return ranges\n\ndef time_to_index(time_str):\n\
          \    \"\"\"æ™‚é–“æ–‡å­—åˆ—(HH:MM)ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(0-1439)ã«å¤‰æ›ã—ã¾ã™ã€‚\"\"\"\n    hours, minutes\
          \ = map(int, time_str.split(\":\"))  # æ™‚é–“ã¨åˆ†ã‚’æ•´æ•°ã«å¤‰æ›\n    return hours * 60\
          \ + minutes  # æ™‚é–“ã‚’åˆ†ã«å¤‰æ›ã—ã¦åˆ†ã‚’åŠ ç®—ã—ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—\n\n\ndef index_to_time(index):\n\
          \    \"\"\"ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(0-1439)ã‚’æ™‚é–“æ–‡å­—åˆ—(HH:MM)ã«å¤‰æ›ã—ã¾ã™ã€‚\"\"\"\n    hours = index //\
          \ 60  # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’60ã§å‰²ã£ã¦æ™‚é–“ã‚’è¨ˆç®—\n    minutes = index % 60  # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’60ã§å‰²ã£ãŸä½™ã‚Šã§åˆ†ã‚’è¨ˆç®—\n\
          \    return f\"{hours:02d}:{minutes:02d}\"  # æ™‚é–“ã¨åˆ†ã‚’2æ¡ã®ã‚¼ãƒ­åŸ‹ã‚ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n\ndef\
          \ mark_schedule(calendar, schedule):\n    \"\"\"æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚\"\
          \"\"\n    for event in schedule:\n            \n        start_idx = time_to_index(event['start'])\
          \  # ã‚¤ãƒ™ãƒ³ãƒˆã®é–‹å§‹æ™‚åˆ»ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¤‰æ›\n        end_idx = time_to_index(event['end'])\
          \  # ã‚¤ãƒ™ãƒ³ãƒˆã®çµ‚äº†æ™‚åˆ»ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¤‰æ›\n        for i in range(start_idx, end_idx):\n\
          \            if event['showAs'] != 'free' and event['showAs'] != 'workingElsewhere':\n\
          \                calendar[i] = 1  # ã‚¤ãƒ™ãƒ³ãƒˆãŒã€Œfreeã€ã¾ãŸã¯ã€ŒworkingElsewhereã€ã§ãªã„å ´åˆã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒãƒ¼ã‚¯\n\
          \ndef get_free_time_slots(calendar, conference_time, step=15):\n    \"\"\
          \"ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ç©ºãæ™‚é–“ã®ã‚¹ãƒ­ãƒƒãƒˆã‚’è¨ˆç®—ã—ã¾ã™ã€‚\"\"\"\n    free_slots = []\n\n    for start in\
          \ range(0, len(calendar) - conference_time + 1, step):\n        is_free\
          \ = True\n        for i in range(start, start + conference_time):\n    \
          \        if calendar[i] != 0:\n                is_free = False  # ã‚¹ãƒ­ãƒƒãƒˆå†…ã«ãƒãƒ¼ã‚¯ãŒã‚ã‚‹å ´åˆã¯ç©ºãæ™‚é–“ã§ã¯ãªã„ã¨åˆ¤æ–­\n\
          \                break\n        if is_free:\n            free_slots.append((start,\
          \ start + conference_time))  # ç©ºãæ™‚é–“ã®ã‚¹ãƒ­ãƒƒãƒˆã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ \n    return free_slots\n\
          \ndef parse_time_ranges(time_ranges):\n    \"\"\"æ™‚é–“ç¯„å›²ã®æ–‡å­—åˆ—ã‚’è¾æ›¸ã®ãƒªã‚¹ãƒˆã«è§£æã—ã¾ã™ã€‚\"\
          \"\"\n    ranges = []\n    for time_range in time_ranges.split(','):\n \
          \       start, end = time_range.split('-')\n        ranges.append({'start':\
          \ start.strip(), 'end': end.strip(), 'showAs': \"busy\", 'isAllDay': False})\
          \  # é–‹å§‹ã¨çµ‚äº†æ™‚é–“ã‚’è¾æ›¸ã¨ã—ã¦è¿½åŠ ã€‚strip()ã§ç©ºç™½æ–‡å­—ã‚’å‰Šé™¤\n        \n    return ranges\n\n\n\
          def find_common_free_times(data, exclude_times, work_hours, conference_time,\
          \ holidays, start_date, end_date, step):\n    \n    free_slots_flag = True\
          \   # å…±é€šã®ç©ºãæ™‚é–“ãŒå–ã‚ŒãŸã‹ã©ã†ã‹è¨˜éŒ²ã™ã‚‹å¤‰æ•°\n    total_free_slots_count = 0  # å…±é€šã®ç©ºãæ™‚é–“ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹å¤‰æ•°\n\
          \n    # é–‹å§‹ã¨çµ‚äº†æ—¥æ™‚ã‚’datetimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n    start_date = datetime.fromisoformat(start_date.replace('/',\
          \ '-'))\n    end_date = datetime.fromisoformat(end_date.replace('/', '-'))\n\
          \n    exclude_times_parsed = parse_time_ranges(exclude_times)  # é™¤å¤–æ™‚é–“ã‚’è§£æã—ã€è¾æ›¸å‹ã«ã™ã‚‹\n\
          \    work_hours_parsed = {'start': work_hours.split('-')[0], 'end': work_hours.split('-')[1]}\
          \  # å‹¤å‹™æ™‚é–“ã‚’è§£æã€è¾æ›¸å‹ã«ã™ã‚‹\n    holidays_set = set(holidays)  # ç¥æ—¥ã®ãƒªã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆã«å¤‰æ›\n\
          \n    users_schedules = data  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å–å¾—\n    users_schedules[\"\
          common\"] = {}\n\n    \n    all_days = set()\n    # æŒ‡å®šã•ã‚ŒãŸæœŸé–“å†…ã®æ—¥ä»˜ã‚’å–å¾—\n   \
          \ current_date = start_date\n \n    while current_date <= end_date:\n  \
          \      # åœŸæ—¥ã‚’é™¤å¤–\n        if current_date.weekday() < 5:  # 0-4ã¯å¹³æ—¥\n     \
          \       all_days.add(current_date.strftime(\"%Y-%m-%d\"))\n        current_date\
          \ += timedelta(days=1)\n\n    # ç¾åœ¨ã®æ—¥ä»˜ã‚’ YYYY-MM-DD å½¢å¼ã§å–å¾—\n    today_str =\
          \ datetime.now().strftime(\"%Y-%m-%d\")\n    \n    \n    common_free_times\
          \ = {}\n    for day in sorted(all_days):\n        if day in holidays_set:\
          \  # ç¥æ—¥ã‚’ã‚¹ã‚­ãƒƒãƒ—\n            continue\n        \n        day_schedules = {}\n\
          \        for user, schedule in users_schedules.items():\n            day_schedules[user]\
          \ = schedule.get(day, [])  # å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãã®æ—¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å–å¾—\n\n        free_times_per_user\
          \ = {}\n        for user, schedule in day_schedules.items():\n         \
          \   calendar = [0] * 1440  # 1æ—¥ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆåˆ†å˜ä½ï¼‰\n\n            # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n\
          \            mark_schedule(calendar, schedule)\n\n            # é™¤å¤–æ™‚é–“ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n\
          \            mark_schedule(calendar, exclude_times_parsed)\n           \
          \ \n            # ç¾åœ¨ã®æ—¥ä»˜ã‚’ YYYY-MM-DD å½¢å¼ã§å–å¾—\n            today_str = datetime.now().strftime(\"\
          %Y-%m-%d\")\n\n            # ç¾åœ¨æ™‚åˆ»ä»¥å‰ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n            if day ==  today_str:\n\
          \                mark_schedule(calendar, get_current_time_dict())\n\n  \
          \          # å‹¤å‹™æ™‚é–“ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n            work_start_idx = time_to_index(work_hours_parsed['start'])\n\
          \            work_end_idx = time_to_index(work_hours_parsed['end'])\n  \
          \          for i in range(0, work_start_idx):\n                calendar[i]\
          \ = 1  # å‹¤å‹™æ™‚é–“å‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯\n            for i in range(work_end_idx, 1440):\n \
          \               calendar[i] = 1  # å‹¤å‹™æ™‚é–“å¾Œã‚’ãƒ–ãƒ­ãƒƒã‚¯\n\n            # ç©ºãæ™‚é–“ã‚’è¦‹ã¤ã‘ã‚‹\n\
          \            free_times_per_user[user] = get_free_time_slots(calendar, conference_time,step)\n\
          \n        # å…±é€šã®ç©ºãã‚¹ãƒ­ãƒƒãƒˆã‚’è¦‹ã¤ã‘ã‚‹\n        common_slots = set(free_times_per_user[list(free_times_per_user.keys())[0]])\n\
          \        for slots in free_times_per_user.values():\n            common_slots.intersection_update(slots)\
          \  # å…±é€šã®ç©ºãã‚¹ãƒ­ãƒƒãƒˆã‚’è¨ˆç®—\n\n        # æ—¥ä»˜ã”ã¨ã«çµæœã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–\n        if day not in common_free_times:\n\
          \            common_free_times[day] = []\n        for start, end in sorted(common_slots):\n\
          \            common_free_times[day].append({\n                \"FreeTime\"\
          : f\"{index_to_time(start)}-{index_to_time(end)}\",  # ç©ºãæ™‚é–“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n   \
          \         })\n            total_free_slots_count += 1  # å…±é€šã®ç©ºãã‚¹ãƒ­ãƒƒãƒˆã‚’ã‚«ã‚¦ãƒ³ãƒˆ\n\
          \n    # å…±é€šã®ç©ºãæ™‚é–“ãŒ0ä»¶ã®å ´åˆã¯ False ã‚’è¿”ã™\n    if total_free_slots_count == 0:\n\
          \        free_slots_flag = False\n\n    return common_free_times, free_slots_flag\n\
          \ndef main(working_times, exclusion_times, not_available_times, conference_time,\
          \ holidays, start_date , end_date) -> dict:\n    # å…±é€šã®ç©ºãæ™‚é–“ã‚’è¦‹ã¤ã‘ã‚‹\n    common_free_times,\
          \ free_slots_flag = find_common_free_times(json.loads(not_available_times),\
          \ exclusion_times, working_times, conference_time, holidays, start_date\
          \ , end_date, 30)\n\n    # çµæœã‚’å‡ºåŠ›\n    json_output = json.dumps(common_free_times,\
          \ ensure_ascii=False)\n\n    return {\n        \"available_times\": json_output,\
          \  # ç©ºãæ™‚é–“ã‚’è¾æ›¸ã¨ã—ã¦è¿”ã™\n        \"free_slots_flag\": str(free_slots_flag)\n \
          \   }"
        code_language: python3
        desc: ''
        outputs:
          available_times:
            children: null
            type: string
          free_slots_flag:
            children: null
            type: string
        selected: false
        title: å…±é€šç©ºãæ™‚é–“ã‚’ç®—å‡º
        type: code
        variables:
        - value_selector:
          - conversation
          - working_times
          variable: working_times
        - value_selector:
          - conversation
          - exclusion_times
          variable: exclusion_times
        - value_selector:
          - '1727252112266'
          - calendar
          variable: not_available_times
        - value_selector:
          - '1724663548765'
          - conferenceTime
          variable: conference_time
        - value_selector:
          - conversation
          - holidays
          variable: holidays
        - value_selector:
          - conversation
          - start_date
          variable: start_date
        - value_selector:
          - conversation
          - end_date
          variable: end_date
      height: 54
      id: '1727252615094'
      position:
        x: 2786.00544662214
        y: 2245.2171745319943
      positionAbsolute:
        x: 2786.00544662214
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        author: difyadmin
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"ç©ºãæ™‚é–“ç®—å‡º","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ' (1)'
        type: ''
        width: 240
      height: 88
      id: '17272528815140'
      position:
        x: 1558.014415819086
        y: 2225.569392824832
      positionAbsolute:
        x: 1558.014415819086
        y: 2225.569392824832
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        assigned_variable_selector:
        - conversation
        - based_on_business_hours
        desc: ''
        input_variable_selector:
        - '1727310746680'
        - output
        selected: false
        title: BasedOnBusinessHoursã‚’æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1727310221154'
      position:
        x: 6835.540633644658
        y: 379.1582430314195
      positionAbsolute:
        x: 6835.540633644658
        y: 379.1582430314195
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main() -> dict:\n    return {\n        \"False\": \"False\",\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          'False':
            children: null
            type: string
        selected: false
        title: '"False"ã‚’æº–å‚™'
        type: code
        variables: []
      height: 54
      id: '1727310246418'
      position:
        x: 6133.350925005505
        y: 328.41704746463733
      positionAbsolute:
        x: 6133.350925005505
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main() -> dict:\n    return {\n        \"True\": \"True\",\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          'True':
            children: null
            type: string
        selected: false
        title: '"True"ã‚’æº–å‚™ '
        type: code
        variables: []
      height: 54
      id: '17273106731170'
      position:
        x: 6133.350925005505
        y: 483.9802457479239
      positionAbsolute:
        x: 6133.350925005505
        y: 483.9802457479239
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: False/Trueã‚’æº–å‚™
        type: variable-aggregator
        variables:
        - - '1727310246418'
          - 'False'
        - - '17273106731170'
          - 'True'
      height: 138
      id: '1727310746680'
      position:
        x: 6515.029509934594
        y: 379.1582430314195
      positionAbsolute:
        x: 6515.029509934594
        y: 379.1582430314195
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - available_times
        desc: ''
        input_variable_selector:
        - '1727252615094'
        - available_times
        selected: false
        title: å…±é€šç©ºãæ™‚é–“ã‚’å¤‰æ•°ã«ã‚»ãƒƒãƒˆ
        type: assigner
        write_mode: over-write
      height: 132
      id: '1728519034672'
      position:
        x: 3064.4557310506016
        y: 2245.2171745319943
      positionAbsolute:
        x: 3064.4557310506016
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 50bf82dc-cfc2-434a-95f2-81a768e9bb77
            value: å«ã‚ã‚‹
            varType: string
            variable_selector:
            - '1724663548765'
            - include_out_of_business_hours
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: å®šæ™‚å¤–ã‚’èª¿æ•´å¯¾è±¡ã«å«ã‚ã‚‹ã‹ï¼Ÿ
        type: if-else
      height: 126
      id: '1728530898275'
      position:
        x: 5801.456515305918
        y: 345.57065030468493
      positionAbsolute:
        x: 5801.456515305918
        y: 345.57065030468493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(step:int) -> dict:\n    return {\n        \"step\": step -\
          \ 1\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          step:
            children: null
            type: number
        selected: false
        title: STEPã‚’æˆ»ã™(å€¤ã®æº–å‚™)
        type: code
        variables:
        - value_selector:
          - conversation
          - step
          variable: step
      height: 54
      id: '1729175190062'
      position:
        x: 1242.571023473466
        y: 620.5003373356479
      positionAbsolute:
        x: 1242.571023473466
        y: 620.5003373356479
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - step
        desc: ''
        input_variable_selector:
        - '1729175190062'
        - step
        selected: false
        title: STEPã‚’æˆ»ã™(å€¤ã®ä»£å…¥)
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729175245853'
      position:
        x: 1242.571023473466
        y: 673.5003373356478
      positionAbsolute:
        x: 1242.571023473466
        y: 673.5003373356478
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ç¢ºèªã„ãŸã—ã¾ã™ã­ã€‚\n\nå…¥åŠ›ã„ãŸã ã„ãŸå†…å®¹ã‹ã‚‰ã€è©²å½“ã®å‚åŠ è€…ã®å€™è£œã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸã€‚\n\n**æ•°å­—ã‚’æŒ‡å®šã—ã¦ã€è©²å½“ã®å‚åŠ è€…ã‚’ãŠé¸ã³ãã ã•ã„ï¼**\n\
          \n\n{{#1729175423598.output_text#}}\n\n--------\n**å›ç­”ä¾‹**\n\nâ– å‚åŠ è€…ã‚’æŒ‡å®š\n  **1,3,5**\n\
          \nâ– å‚åŠ è€…ã®å…¥åŠ›ã«æˆ»ã‚ŠãŸã„å ´åˆã€ã€Œæˆ»ã‚‹ã€ã¨å…¥åŠ›ãã ã•ã„ã€‚\n**æˆ»ã‚‹**\n\n\n"
        desc: ''
        selected: false
        title: ã€ã€STEP2 å‚åŠ è€…æŒ‡å®šã€‘
        type: answer
        variables: []
      height: 218
      id: '1729175270818'
      position:
        x: 1904.905594591443
        y: 1176.6859071372426
      positionAbsolute:
        x: 1904.905594591443
        y: 1176.6859071372426
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\nimport json\n\ndef main(estimated_participants: list) -> dict:\n\n\
          \    output_text = \"\"\n    keyword = \"\"\n\n    for index, part_dict\
          \ in enumerate(estimated_participants):\n        \n        num = index +\
          \ 1 \n\n        if part_dict[\"keyword\"] != keyword:\n            keyword\
          \ = part_dict[\"keyword\"]\n            output_text += f\"--------\\nã€Œ{keyword}ã€\\\
          nä»¥ä¸‹ã‹ã‚‰å€™è£œã‚’é¸ã‚“ã§ãã ã•ã„ã€‚\\n\"\n\n        # å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™\n        output_text += f\"\
          \\n{num}. {part_dict['department']} {part_dict['section']}ï¼š\\n{part_dict['name']}\
          \ : {part_dict['mail']}\\n\\n\"\n\n\n    return {\n        \"output_text\"\
          : output_text,\n    }"
        code_language: python3
        desc: ''
        outputs:
          output_text:
            children: null
            type: string
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™
        type: code
        variables:
        - value_selector:
          - conversation
          - estimated_participants
          variable: estimated_participants
      height: 54
      id: '1729175423598'
      position:
        x: 1601.6708561610346
        y: 1176.6859071372426
      positionAbsolute:
        x: 1601.6708561610346
        y: 1176.6859071372426
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ã“ã‚“ã«ã¡ã¯ï¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã®ãŠæ‰‹ä¼ã„ã‚’ã„ãŸã—ã¾ã™ã€‚ã¾ãšã€ä»Šå›ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å‚åŠ ã™ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚


          --------

          **å›ç­”ä¾‹**


          - æ± ç”°ä¿®ä¸€ã€è‡ªå‹•è»Šã®é£¯å¡š

          - ikeda,iizuka'
        desc: ''
        selected: false
        title: ã€STEP1 å‚åŠ è€…å…¥åŠ›ã€‘
        type: answer
        variables: []
      height: 168
      id: '1729175885840'
      position:
        x: 1601.6708561610346
        y: 620.5003373356479
      positionAbsolute:
        x: 1601.6708561610346
        y: 620.5003373356479
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(step:int) -> dict:\n    return {\n        \"step\": step\
          \ + 1\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          step:
            children: null
            type: number
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®æº–å‚™)
        type: code
        variables:
        - value_selector:
          - conversation
          - step
          variable: step
      height: 54
      id: '1729175986261'
      position:
        x: 2233.1813405116545
        y: 873.7753195168506
      positionAbsolute:
        x: 2233.1813405116545
        y: 873.7753195168506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - step
        desc: ''
        input_variable_selector:
        - '1729175986261'
        - step
        selected: false
        title: STEPã‚’é€²ã‚ã‚‹(å€¤ã®ä»£å…¥)
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729176044844'
      position:
        x: 2233.1813405116545
        y: 934.0318277418654
      positionAbsolute:
        x: 2233.1813405116545
        y: 934.0318277418654
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: æˆ»ã‚‹ã€ã¨æŒ‡å®šã—ã¦ã„ã‚‹ã€‚
        - id: '2'
          name: 'åŒæ„ã—ã¦ã„ã‚‹ã€‚

            ä¾‹ï¼šãƒã‚¤ã€ã¯ã„ã€haiã€yes'
        desc: ''
        instructions: ''
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        query_variable_selector:
        - '1724663548765'
        - sys.query
        selected: false
        title: æç¤ºã•ã‚ŒãŸå‚åŠ è€…ã«åŒæ„ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
        topics: []
        type: question-classifier
      height: 184
      id: '1729176093466'
      position:
        x: 886.5913758357708
        y: 1218.0390479171358
      positionAbsolute:
        x: 886.5913758357708
        y: 1218.0390479171358
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(step:int) -> dict:\n    return {\n        \"step\": step -\
          \ 1\n    }\n\n"
        code_language: python3
        desc: ''
        outputs:
          step:
            children: null
            type: number
        selected: false
        title: STEPã‚’æˆ»ã™(å€¤ã®æº–å‚™)
        type: code
        variables:
        - value_selector:
          - conversation
          - step
          variable: step
      height: 54
      id: '1729176193190'
      position:
        x: 1242.571023473466
        y: 1176.6859071372426
      positionAbsolute:
        x: 1242.571023473466
        y: 1176.6859071372426
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - step
        desc: ''
        input_variable_selector:
        - '1729176193190'
        - step
        selected: false
        title: STEPã‚’æˆ»ã™(å€¤ã®ä»£å…¥)
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729176240096'
      position:
        x: 1242.571023473466
        y: 1238.7156183070824
      positionAbsolute:
        x: 1242.571023473466
        y: 1238.7156183070824
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: å‚åŠ è€…ã‚’æŒ‡å®šã—ãªãŠã—ã¦ã„ã‚‹
        - id: '2'
          name: æ—¥ç¨‹ã‚„æ™‚é–“ã‚’æŒ‡å®šã—ãªãŠã—ã¦ã„ã‚‹
        - id: '1729402844349'
          name: å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã™ã‚‹ã“ã¨ã‚’å¸Œæœ›ã—ã¦ã„ã‚‹
        - id: '1729483823544'
          name: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½•ã‚’æœ›ã‚“ã§ã„ã‚‹ã®ã‹ã€ã¾ã ã¯ã£ãã‚Šã—ãªã„ã€‚ã¾ãŸãã®ä»–ã®å…¥åŠ›ã€‚

            ä¾‹ï¼š

            èª¿æ•´ã‚’ç¶šã‘ã‚‹ã€

            ä½•ãŒã§ãã¾ã™ã‹ï¼Ÿ

            '
        desc: ''
        instruction: ''
        instructions: ''
        memory:
          query_prompt_template: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        query_variable_selector:
        - '1724663548765'
        - sys.query
        selected: false
        title: è¦æœ›ã®åˆ†é¡
        topics: []
        type: question-classifier
      height: 312
      id: '1729402806019'
      position:
        x: 1066.3238690054984
        y: 2867.6275593208097
      positionAbsolute:
        x: 1066.3238690054984
        y: 2867.6275593208097
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ã”å¸Œæœ›ã«æ·»ãˆãšç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚


          å‚åŠ è€…ã®å†æŒ‡å®šã¯ç¾åœ¨ã§ãã¾ã›ã‚“ã€‚

          ã‚‚ã—å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã¯ã€**ç”»é¢å³ä¸Šã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒœã‚¿ãƒ³**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚'
        desc: ''
        selected: false
        title: å‚åŠ è€…ã®å†æŒ‡å®š
        type: answer
        variables: []
      height: 168
      id: '1729403028681'
      position:
        x: 1507.745550816607
        y: 2719.007317836435
      positionAbsolute:
        x: 1507.745550816607
        y: 2719.007317836435
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - conversation
          - available_times
        desc: æŠ½å‡ºã•ã‚ŒãŸå…±é€šç©ºãæ™‚é–“ã‹ã‚‰ã€ãƒ¦ãƒ¼ã‚¶ã®ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸç©ºãæ™‚é–“ã‚’æŠ½å‡ºã™ã‚‹ã€‚
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt4o-CTC-ScheduleOpenAI
          provider: azure_openai
        prompt_template:
        - id: 6ce51b9d-0849-4c8a-801e-1eda99f432e6
          role: system
          text: "# å‘½ä»¤\nå–å¾—ã—ãŸå…±é€šã®ç©ºãæ™‚é–“ã®ä¸­ã‹ã‚‰æœ€å¤§3ã¤é¸ã³ã€æç¤ºã—ã¦ãã ã•ã„ã€‚ç„¦ã£ã¦ç­”ãˆã¯å‡ºã•ãšã€æ™‚é–“ã‚’ã‹ã‘ã¦æ…é‡ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            \n\n# å…±é€šã®ç©ºãæ™‚é–“\n{{#context#}}\n\n# æ‰‹é †\n1. ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\nã€€1-1 ç©ºãæ™‚é–“ï¼ˆxx:xx-xx:xxï¼‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆ\n\
            ã€€ã€€æ¬¡ã®æ‰‹é †2ã«é€²ã‚“ã§ãã ã•ã„ã€‚\nã€€1-2 ç©ºãæ™‚é–“ï¼ˆxx:xx-xx:xxï¼‰ãŒå­˜åœ¨ã—ãªã„å ´åˆ\nã€€ã€€ã€Œå‡ºåŠ›ä¾‹1ã€ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            2. ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã€Œã€Œãã®ä»–è¦æœ›ã€ã‚’å—ã‘å–ã£ãŸã‹ï¼Ÿ\nã€€2-1 å—ã‘å–ã£ãŸå ´åˆ\nã€€ã€€ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’å‚ç…§ã—ã€ãƒ¦ãƒ¼ã‚¶ã®å¸Œæœ›ã«ã‚ã£ãŸæ—¥æ™‚ã‚’æœ€å¤§ï¼“ã¤é¸æŠã—ã¦ãã ã•ã„ã€‚å¸Œæœ›ã«æ²¿ã£ãŸæ—¥æ™‚ãŒ1ã¤ã‚‚ãªã„å ´åˆã€ã€€ã€Œå‡ºåŠ›ä¾‹1ã€ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            ã€€2-2 å—ã‘å–ã£ã¦ãªã„å ´åˆ\nã€€ã€€ã€Œå…±é€šã®ç©ºãæ™‚é–“ã€ã‚’å‚ç…§ã—ã€ä¸€ç•ªæ—©ã„æ—¥ä»˜ã‹ã‚‰ï¼“ã¤é¸æŠã—ã¦ãã ã•ã„ã€‚\n3. ã€Œå‡ºåŠ›å½¢å¼ã€ã¨ã€Œå‡ºåŠ›ä¾‹2ã€ã«æ²¿ã£ã¦ã€é¸æŠã—ãŸ3ã¤ã®ç©ºãæ™‚é–“ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\
            \ \n\n\n# ãã®ä»–è¦æœ›\n{{#1724663548765.other_request#}}\n{{#sys.query#}}\n\n\
            # å‡ºåŠ›å½¢å¼\nä»¥ä¸‹ã¯å‚åŠ è€…ã®å…±é€šã®ç©ºãæ™‚é–“ã§ã™ã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä¼šè­°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\
            \n[æ—¥ç¨‹](ãƒªãƒ³ã‚¯)\n\n\n# å‡ºåŠ›ä¾‹1\né©ã—ãŸç©ºãæ™‚é–“ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\n\n**ãªãŠã€å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æ¢ã—ã€æç¤ºã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚**\n\
            \n# å‡ºåŠ›ä¾‹2\nä»¥ä¸‹ã¯å‚åŠ è€…ã®å…±é€šã®ç©ºãæ™‚é–“ã§ã™ã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä¼šè­°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\n[2024å¹´6æœˆ6æ—¥ 16:00-16:30](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:00:00&enddt=2024-06-06T16:30:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n\
            \n[2024å¹´6æœˆ6æ—¥ 16:15-16:45](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:15:00&enddt=2024-06-06T16:45:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n\
            \n[2024å¹´6æœˆ6æ—¥ 16:30-17:00](https://outlook.office.com/calendar/deeplink/compose?path=/calendar/action/compose&startdt=2024-06-06T16:30:00&enddt=2024-06-06T17:00:00&subject='ä¼šè­°åã‚’è¨­å®šã—ã¦ãã ã•ã„'&body='æœ¬æ–‡ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚'&to={{#conversation.address#}})\n"
        selected: false
        title: 'ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸç©ºãæ™‚é–“ã‚’å†æŠ½å‡º  '
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: true
      height: 142
      id: '17294031324280'
      position:
        x: 1798.9418995633218
        y: 3125.2106306936375
      positionAbsolute:
        x: 1798.9418995633218
        y: 3125.2106306936375
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nfrom datetime import datetime, timezone, timedelta\n\n\
          # ç¾åœ¨ã®æ™‚åˆ»ã‚’è¾æ›¸å‹ã«å¤‰æ›\ndef get_current_time_dict():\n\n    current_time = datetime.now(timezone(timedelta(hours=+9)))\n\
          \n    # åˆ†ã‚’æœ€ã‚‚è¿‘ã„30åˆ†å˜ä½ã«ä¸¸ã‚ã‚‹\n    rounded_minute = 30 if current_time.minute\
          \ >= 30 else 0\n    # æ™‚é–“ã¨åˆ†ã‚’ã€ŒHH:MMã€å½¢å¼ã®æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    current_time_str =\
          \ f\"{current_time.hour:02d}:{rounded_minute:02d}\"\n    # è¾æ›¸å‹ã®æ™‚é–“ç¯„å›²ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ \n\
          \    ranges = []\n    ranges.append({\"start\": \"00:00\", \"end\": current_time_str,\
          \ 'showAs': \"busy\", 'isAllDay': False})\n        \n    return ranges\n\
          \n# æ™‚é–“æ–‡å­—åˆ—(HH:MM)ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(0-1439)ã«å¤‰æ›\ndef time_to_index(time_str):\n    #\
          \ æ™‚é–“ã¨åˆ†ã‚’åˆ†é›¢ã—ã¦æ•´æ•°ã«å¤‰æ›\n    hours, minutes = map(int, time_str.split(\":\"))\n\
          \    # æ™‚é–“ã‚’åˆ†ã«å¤‰æ›ã—ã¦åˆè¨ˆã‚’è¿”ã™\n    return hours * 60 + minutes\n\n# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(0-1439)ã‚’æ™‚é–“æ–‡å­—åˆ—(HH:MM)ã«å¤‰æ›\n\
          def index_to_time(index):\n    # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’60ã§å‰²ã£ã¦æ™‚é–“ã‚’è¨ˆç®—\n    hours = index //\
          \ 60\n    # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’60ã§å‰²ã£ãŸä½™ã‚Šã§åˆ†ã‚’è¨ˆç®—\n    minutes = index % 60\n    # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ãŸæ–‡å­—åˆ—ã‚’è¿”ã™\n\
          \    return f\"{hours:02d}:{minutes:02d}\"\n\n# æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒãƒ¼ã‚¯\n\
          def mark_schedule(day, calendar, schedule, user):\n\n    for event in schedule:\n\
          \        # ã‚¤ãƒ™ãƒ³ãƒˆã®é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¤‰æ›\n        start_idx = time_to_index(event['start'])\n\
          \        end_idx = time_to_index(event['end'])\n        for i in range(start_idx,\
          \ end_idx):\n            # ã‚¤ãƒ™ãƒ³ãƒˆãŒã€Œfreeã€ã¾ãŸã¯ã€ŒworkingElsewhereã€ã§ãªã„å ´åˆã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒãƒ¼ã‚¯\n\
          \            if event['showAs'] != 'free' and event['showAs'] != 'workingElsewhere':\n\
          \                calendar[i][\"num\"] += 1\n                calendar[i][\"\
          user\"] = user\n                calendar[i][\"day\"] = day\n           \
          \     calendar[i][\"event\"] = event\n\n# æŒ‡å®šã•ã‚ŒãŸé™¤å¤–æ™‚é–“ã«åŸºã¥ã„ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒãƒ¼ã‚¯\ndef mark_exclude(calendar,\
          \ schedule):\n    for event in schedule:\n        # é™¤å¤–æ™‚é–“ã®é–‹å§‹ãƒ»çµ‚äº†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—\n\
          \        start_idx = time_to_index(event['start'])\n        end_idx = time_to_index(event['end'])\n\
          \        \n        for i in range(start_idx, end_idx):\n            calendar[i][\"\
          num\"] += 0\n\n# æ™‚é–“ç¯„å›²ã®æ–‡å­—åˆ—ã‚’è¾æ›¸ã®ãƒªã‚¹ãƒˆã«è§£æ\ndef parse_time_ranges(time_ranges):\n\
          \    ranges = []\n    # ã‚«ãƒ³ãƒã§åŒºåˆ‡ã‚‰ã‚ŒãŸç¯„å›²ã‚’å‡¦ç†\n    for time_range in time_ranges.split(','):\n\
          \        start, end = time_range.split('-')\n        # é–‹å§‹ã¨çµ‚äº†æ™‚é–“ã‚’è¾æ›¸ã¨ã—ã¦è¿½åŠ ã€‚strip()ã§ç©ºç™½æ–‡å­—ã‚’å‰Šé™¤\n\
          \        ranges.append({'start': start.strip(), 'end': end.strip(), 'showAs':\
          \ \"busy\", 'isAllDay': False})\n        \n    return ranges\n\n# æŒ‡å®šæœŸé–“å†…ã§èª¿æ•´å¯èƒ½ãªæ™‚é–“ã‚’è¦‹ã¤ã‘ã‚‹\n\
          def find_adjustment_times(data, exclusion_times, work_hours, conference_time,\
          \ holidays, start_date, end_date):\n    \n\n    # é–‹å§‹ã¨çµ‚äº†æ—¥æ™‚ã‚’datetimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n\
          \    start_date = datetime.fromisoformat(start_date.replace('/', '-'))\n\
          \    end_date = datetime.fromisoformat(end_date.replace('/', '-'))\n\n \
          \   # é™¤å¤–æ™‚é–“ã‚’è§£æã—ã€è¾æ›¸å‹ã«ã™ã‚‹\n    exclude_times_parsed = parse_time_ranges(exclusion_times)\n\
          \    # å‹¤å‹™æ™‚é–“ã‚’è§£æã€è¾æ›¸å‹ã«ã™ã‚‹\n    work_hours_parsed = {'start': work_hours.split('-')[0],\
          \ 'end': work_hours.split('-')[1]}\n    # ç¥æ—¥ã®ãƒªã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆã«å¤‰æ›\n    holidays_set\
          \ = set(holidays)\n\n    # ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å–å¾—\n    users_schedules = data\n\
          \    users_schedules[\"common\"] = {}\n\n    \n    all_days = set()\n  \
          \  # æŒ‡å®šã•ã‚ŒãŸæœŸé–“å†…ã®æ—¥ä»˜ã‚’å–å¾—\n    current_date = start_date\n    \n    # é–‹å§‹ã‹ã‚‰çµ‚äº†æ—¥ã¾ã§ã®æ—¥ä»˜ã‚’å–å¾—ï¼ˆå¹³æ—¥ï¼‰\n\
          \    while current_date <= end_date:\n        # åœŸæ—¥ã‚’é™¤å¤–\n        if current_date.weekday()\
          \ < 5:  # 0-4ã¯å¹³æ—¥\n            all_days.add(current_date.strftime(\"%Y-%m-%d\"\
          ))\n        current_date += timedelta(days=1)\n\n    # ç¾åœ¨ã®æ—¥ä»˜ã‚’ YYYY-MM-DD\
          \ å½¢å¼ã§å–å¾—\n    today_str = datetime.now().strftime(\"%Y-%m-%d\")\n    \n \
          \   # èª¿æ•´å¯èƒ½ãªæ™‚é–“ã®ãƒªã‚¹ãƒˆ\n    adjustment_times = []\n    \n    # å„æ—¥ä»˜ã”ã¨ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆ\n\
          \    for day in sorted(all_days):\n        # ç¥æ—¥ã‚’ã‚¹ã‚­ãƒƒãƒ—\n        if day in\
          \ holidays_set:\n            continue\n        \n        #ç©ºã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼\n    \
          \    calendar = [{\"num\": 0, \"user\": \"\", \"day\": \"\", \"event\":\
          \ \"\"} for _ in range(1440)]\n        \n        day_schedules = {}\n  \
          \      for user, schedule in users_schedules.items():\n            # å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãã®æ—¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å–å¾—\n\
          \            day_schedules[user] = schedule.get(day, [])\n\n        for\
          \ user, schedule in day_schedules.items():\n\n            # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n\
          \            mark_schedule(day, calendar, schedule, user)\n\n          \
          \  # é™¤å¤–æ™‚é–“ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n            mark_exclude(calendar, exclude_times_parsed)\n\
          \            \n            # ç¾åœ¨ã®æ—¥ä»˜ã‚’ YYYY-MM-DD å½¢å¼ã§å–å¾—\n            today_str\
          \ = datetime.now().strftime(\"%Y-%m-%d\")\n\n            # ç¾åœ¨æ™‚åˆ»ä»¥å‰ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n\
          \            if day ==  today_str:\n                mark_exclude(calendar,\
          \ get_current_time_dict())\n\n            # å‹¤å‹™æ™‚é–“ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãƒãƒ¼ã‚¯\n           \
          \ work_start_idx = time_to_index(work_hours_parsed['start'])\n         \
          \   work_end_idx = time_to_index(work_hours_parsed['end'])\n           \
          \ for i in range(0, work_start_idx):\n                calendar[i][\"num\"\
          ] = 0  # å‹¤å‹™æ™‚é–“å‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯\n            for i in range(work_end_idx, 1440):\n \
          \               calendar[i][\"num\"] = 0  # å‹¤å‹™æ™‚é–“å¾Œã‚’ãƒ–ãƒ­ãƒƒã‚¯\n               \
          \ \n        # èª¿æ•´å¯¾è±¡ã®äºˆå®šã‚’æ¢ã™ï¼ˆãã®æ™‚é–“å¸¯ã«ãã®äºˆå®šã‹ä¸€ã¤ã—ã‹ãªã„ã€ãŠã‚ˆã³ã€ä¸€ã¤ã—ã‹ãªã„æ™‚é–“ãŒconferenceTimeã«é”ã™ã‚‹å ´åˆã«ã€èª¿æ•´å¯¾è±¡ï¼‰\n\
          \        event = \"\"\n        count = 0\n\n        for slot in calendar:\n\
          \            if slot[\"num\"] == 1: #[\"num\"]=1ã¨ã„ã†ã“ã¨ã¯ãã®æ™‚é–“ã¯äºˆå®šãŒä¸€ã¤ã—ã‹ãªã„ã¨ã„ã†ã“ã¨\n\
          \                \n                # å¯¾è±¡ã®äºˆå®šãŒåˆ‡ã‚Šæ›¿ã‚ã£ãŸ\n                if slot[\"\
          event\"] != event:\n                    count = 0\n                    event\
          \ = slot[\"event\"]\n                \n                count += 1\n    \
          \            \n                # å¯¾è±¡ã®äºˆå®šãŒä¸€ã¤ã—ã‹ãªã„æ™‚é–“ãŒconferenceTimeã«é”ã—ãŸã‚‰ã€ã‹ã¤éè¡¨ç¤ºã®äºˆå®šã§ãªã„å ´åˆã€èª¿æ•´å¯¾è±¡ã®äºˆå®šã«è¿½åŠ \n\
          \                if count == (conference_time-1) and slot[\"event\"][\"\
          subject\"] != \"private\": \n                    adjustment_times.append(slot)\n\
          \        \n\n    # èª¿æ•´å¯¾è±¡ã®äºˆå®šãŒ0ä»¶ã®å ´åˆã¯ False ã‚’è¿”ã™\n    adjustment_times_flag =\
          \ bool(adjustment_times)\n\n    return adjustment_times, adjustment_times_flag\n\
          \ndef main(working_times, exclusion_times, not_available_times, conference_time,\
          \ holidays, start_date , end_date) -> dict:\n    # èª¿æ•´å¯¾è±¡ã®äºˆå®šã‚’è¦‹ã¤ã‘ã‚‹\n    adjustment_times,\
          \ adjustment_times_flag = find_adjustment_times(json.loads(not_available_times),\
          \ exclusion_times, working_times, conference_time, holidays, start_date\
          \ , end_date)\n\n\n    return {\n        \"adjustment_times\": adjustment_times,\
          \  # èª¿æ•´å¯¾è±¡äºˆå®šã‚’è¾æ›¸ã¨ã—ã¦è¿”ã™\n        \"adjustment_times_flag\": str(adjustment_times_flag)\
          \ # èª¿æ•´å¯¾è±¡äºˆå®šãŒè¦‹ã¤ã‹ã£ãŸã‹ã©ã†ã‹ã‚’è¿”ã™\n    }"
        code_language: python3
        desc: ''
        outputs:
          adjustment_times:
            children: null
            type: array[object]
          adjustment_times_flag:
            children: null
            type: string
        selected: false
        title: èª¿æ•´å¯¾è±¡ã®äºˆå®šã‚’æŠ½å‡º
        type: code
        variables:
        - value_selector:
          - conversation
          - working_times
          variable: working_times
        - value_selector:
          - conversation
          - exclusion_times
          variable: exclusion_times
        - value_selector:
          - '1729697280782'
          - calendar
          variable: not_available_times
        - value_selector:
          - '1724663548765'
          - conferenceTime
          variable: conference_time
        - value_selector:
          - conversation
          - holidays
          variable: holidays
        - value_selector:
          - conversation
          - start_date
          variable: start_date
        - value_selector:
          - conversation
          - end_date
          variable: end_date
      height: 54
      id: '1729403585014'
      position:
        x: 2743.779160660655
        y: 3356.2103714159043
      positionAbsolute:
        x: 2743.779160660655
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - working_times
        desc: ''
        input_variable_selector:
        - '1727252290226'
        - working_times
        selected: false
        title: working_timeã®æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729404163513'
      position:
        x: 2176.125641189932
        y: 2245.2171745319943
      positionAbsolute:
        x: 2176.125641189932
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - exclusion_times
        desc: ''
        input_variable_selector:
        - '1727252290226'
        - exclusion_times
        selected: false
        title: exclusion_timesã®æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729404201236'
      position:
        x: 2427.125641189932
        y: 2245.2171745319943
      positionAbsolute:
        x: 2427.125641189932
        y: 2245.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - holidays
        desc: ''
        input_variable_selector:
        - '1727252290226'
        - holidays
        selected: false
        title: holidaysã®æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729404338268'
      position:
        x: 2176.125641189932
        y: 2383.2171745319943
      positionAbsolute:
        x: 2176.125641189932
        y: 2383.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - start_date
        desc: ''
        input_variable_selector:
        - '1727251498456'
        - start_date
        selected: false
        title: start_dateã®æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729404378589'
      position:
        x: 2427.125641189932
        y: 2383.2171745319943
      positionAbsolute:
        x: 2427.125641189932
        y: 2383.2171745319943
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - end_date
        desc: ''
        input_variable_selector:
        - '1727251498456'
        - end_date
        selected: false
        title: end_dateã®æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729404428309'
      position:
        x: 2176.125641189932
        y: 2518.184502506208
      positionAbsolute:
        x: 2176.125641189932
        y: 2518.184502506208
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’ã”ä¾é ¼ã„ãŸã ã‘ã‚Œã°èª¿æ•´ã„ãŸã—ã¾ã™ã€‚


          --------

          **å›ç­”ä¾‹**


          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„'
        desc: ''
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ãŒä½•ã‚’ã—ãŸã„ã‹ã‚’èã
        type: answer
        variables: []
      height: 168
      id: '1729484406610'
      position:
        x: 1491.6368915805353
        y: 3550.649798243825
      positionAbsolute:
        x: 1491.6368915805353
        y: 3550.649798243825
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'äº†è§£ã—ã¾ã—ãŸï¼ã§ã¯ã€çš†ã•ã‚“ã®ç©ºã„ã¦ã„ã‚‹æ™‚é–“ã‚’ç¢ºèªã—ã¾ã™ã­ã€‚

          å°‘ã€…ãŠå¾…ã¡ãã ã•ã„â€¦


          {{#17294031324280.text#}}


          ä»–ã«ã”å¸Œæœ›ã‚„èª¿æ•´äº‹é …ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ


          --------

          **å›ç­”ä¾‹**

          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„'
        desc: ''
        selected: false
        title: å…±é€šç©ºãæ™‚é–“ã‚’å†æç¤º
        type: answer
        variables: []
      height: 202
      id: '1729484518506'
      position:
        x: 2099.311058534033
        y: 3125.2106306936375
      positionAbsolute:
        x: 2099.311058534033
        y: 3125.2106306936375
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'èª¿æ•´ã§ããã†ãªäºˆå®šã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™ã€‚

          ã“ã¡ã‚‰ã®äºˆå®šãŒãªããªã‚‹ã¨ã€ã”å¸Œæœ›ã®æ¡ä»¶ã§äºˆå®šãŒç™»éŒ²ã§ãã¾ã™ã€‚

          è©²å½“è€…ã«æ›ã‘åˆã£ã¦ã¿ã¦ãã ã•ã„ã€‚




          {{#1731897570544.output_text#}}





          --------



          ä»–ã«ã”å¸Œæœ›ã‚„èª¿æ•´äº‹é …ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ


          --------

          **å›ç­”ä¾‹**

          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„'
        desc: ''
        selected: false
        title: èª¿æ•´å¯èƒ½æ€§ã®é«˜ã„äºˆå®šã®æç¤º
        type: answer
        variables: []
      height: 250
      id: '1729485334320'
      position:
        x: 6014.300202654581
        y: 3356.2103714159043
      positionAbsolute:
        x: 6014.300202654581
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: èª¿æ•´æœŸé–“ã‚’è¶…ãˆã¦ã„ã‚‹
        - id: '2'
          name: èª¿æ•´æœŸé–“ã‚’è¶…ãˆã¦ã„ãªã„ã€ã‚‚ã—ãã¯æ™‚é–“å¸¯ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚
        desc: ''
        instruction: '# å‘½ä»¤

          ãƒ¦ãƒ¼ã‚¶ã®å¸Œæœ›ã—ãŸæ—¥æ™‚ãŒã€Œèª¿æ•´ç¯„å›²ã€ã®ç¯„å›²ã‚’è¶…ãˆã¦ã„ã‚‹ã‹ã©ã†ã‹ã€ã§åˆ†é¡ã—ã¦

          - è¶…ãˆã¦ã„ã‚‹å ´åˆï¼šã‚¯ãƒ©ã‚¹ï¼‘

          - è¶…ãˆã¦ã„ãªã„å ´åˆï¼šã‚¯ãƒ©ã‚¹ï¼’


          # èª¿æ•´ç¯„å›²

          {{#conversation.start_date#}} ~ {{#conversation.end_date#}}'
        instructions: ''
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: ctcgpt4o
          provider: azure_openai
        query_variable_selector:
        - '1724663548765'
        - sys.query
        selected: false
        title: èª¿æ•´æœŸé–“ã‚’è¶…ãˆã¦ã„ã‚‹ã‹ï¼Ÿ
        topics: []
        type: question-classifier
      height: 200
      id: '1729660439862'
      position:
        x: 1497.6997578465769
        y: 2945.142897873501
      positionAbsolute:
        x: 1497.6997578465769
        y: 2945.142897873501
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ã”å¸Œæœ›ã«æ·»ãˆãšç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚


          å†’é ­ã«æŒ‡å®šã„ãŸã ã„ãŸèª¿æ•´æœŸé–“ã‚’è¶…ãˆã‚‹æ—¥ç¨‹ã¯ã€å—ã‘ä»˜ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€‚

          ã‚‚ã—èª¿æ•´æœŸé–“ã‚’å¤‰æ›´ã•ã‚ŒãŸã„å ´åˆã¯ã€**ç”»é¢å³ä¸Šã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒœã‚¿ãƒ³**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã‚‚ã†ä¸€åº¦æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚


          '
        desc: ''
        selected: false
        title: èª¿æ•´æœŸé–“ã‚’è¶…ãˆãŸèª¿æ•´
        type: answer
        variables: []
      height: 184
      id: '1729660641962'
      position:
        x: 1798.9418995633218
        y: 2894.5671305667424
      positionAbsolute:
        x: 1798.9418995633218
        y: 2894.5671305667424
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - payload
        desc: ''
        input_variable_selector:
        - '1727251901797'
        - result
        selected: false
        title: payloadã‚’æ›´æ–°
        type: assigner
        write_mode: over-write
      height: 132
      id: '1729696467433'
      position:
        x: 2433.7231807437965
        y: 2518.184502506208
      positionAbsolute:
        x: 2433.7231807437965
        y: 2518.184502506208
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: '{{#conversation.payload#}}'
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#1729697165815.access_token#}}

          Content-Type:application/json'
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æƒ…å ±ã‚’å–å¾—ï¼ˆãƒãƒƒãƒï¼‰
        type: http-request
        url: https://graph.microsoft.com/v1.0/$batch
        variables: []
      height: 106
      id: '1729696613581'
      position:
        x: 2104.5890901771245
        y: 3356.2103714159043
      positionAbsolute:
        x: 2104.5890901771245
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: 'grant_type:client_credentials

            client_id:{{#env.client_id#}}

            scope:https://graph.microsoft.com/.default

            client_secret:{{#env.client_secret#}}'
          type: form-data
        desc: ''
        headers: Content-Type:application/x-www-form-urlencoded
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
        type: http-request
        url: https://login.microsoftonline.com/{{#env.tenant_id#}}/oauth2/v2.0/token
        variables: []
      height: 124
      id: '1729696985461'
      position:
        x: 1507.745550816607
        y: 3356.2103714159043
      positionAbsolute:
        x: 1507.745550816607
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(response: int) -> dict:\n    # JSONãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦è¾æ›¸ã«å¤‰æ›\n   \
          \ token_data = json.loads(response)\n\n    # ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–ã‚Šå‡ºã™\n    access_token\
          \ = token_data.get('access_token')\n\n    return {\n        \"access_token\"\
          : access_token\n    }"
        code_language: python3
        desc: ''
        outputs:
          access_token:
            children: null
            type: string
        selected: false
        title: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¤‰æ•°ã«ã‚»ãƒƒãƒˆ
        type: code
        variables:
        - value_selector:
          - '1729696985461'
          - body
          variable: response
      height: 54
      id: '1729697165815'
      position:
        x: 1805.6168053112146
        y: 3356.2103714159043
      positionAbsolute:
        x: 1805.6168053112146
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "from datetime import datetime, timedelta\nfrom collections import defaultdict\n\
          import re\n\n# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹\ndef decode_email(encoded_email):\n    decoding_map\
          \ = {\n        '%40': '@','%2E': '.','%2D': '-','%5F': '_','%2B': '+','%25':\
          \ '%','%20': ' '\n    }\n    \n    decoded_email = encoded_email\n    for\
          \ encoded_char, decoded_char in decoding_map.items():\n        decoded_email\
          \ = decoded_email.replace(encoded_char, decoded_char)\n    \n    return\
          \ decoded_email\n\n# ä»»æ„å‚åŠ ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹\ndef check_optional(attendees, target_email)\
          \ -> bool:\n    if not attendees:\n        return False\n    \n    for attendee\
          \ in attendees:\n        if attendee.get('type') == 'optional' and attendee['emailAddress']['address']\
          \ == target_email:\n            return True\n    \n    return False\n\n\n\
          def main(response) -> dict:\n\n    # å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¦æ•´ç†\n    extracted_events\
          \ = {}\n    result = defaultdict(lambda: defaultdict(list))\n\n    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è§£æ\n\
          \    responses = json.loads(response)['responses']\n    for response in\
          \ responses:\n        events = response['body']['value']\n        for event\
          \ in events:\n            # email = event['organizer']['emailAddress']['address']\n\
          \n            # æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŠ½å‡º\n            email_pattern = r\"users\\\
          ('([^']+)'\\)\"\n            match = re.search(email_pattern, response['body']['@odata.context'])\n\
          \            # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰\n            email = decode_email(match.group(1))\n\
          \n            if event['sensitivity'] == 'private':\n                subject\
          \ = 'private'\n            else:\n                subject = event['subject']\n\
          \            start_time = event['start']['dateTime']\n            end_time\
          \ = event['end']['dateTime']\n           \n            # ISOãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ—¥æ™‚ã‚’æ­£è¦åŒ–\n\
          \            start_time = re.sub(r'\\.\\d+', '', start_time) + \"Z\"\n \
          \           end_time = re.sub(r'\\.\\d+', '', end_time) + \"Z\"\n      \
          \      \n            # datetimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›\n            start_dt = datetime.fromisoformat(start_time.replace(\"\
          Z\", \"+00:00\"))\n            end_dt = datetime.fromisoformat(end_time.replace(\"\
          Z\", \"+00:00\"))\n            \n            # 9æ™‚é–“åŠ ç®—\n            start_dt\
          \ += timedelta(hours=9)\n            end_dt += timedelta(hours=9)\n    \
          \        \n            # æ—¥ä»˜ã ã‘ã‚’æŠ½å‡º\n            start_date = start_dt.date().isoformat()\n\
          \            end_date = end_dt.date().isoformat()\n            \n      \
          \      # æ™‚é–“ã¨åˆ†ã ã‘ã‚’æŠ½å‡º\n            start_hour = start_dt.strftime('%H:%M')\n\
          \            end_hour = end_dt.strftime('%H:%M')\n\n            # çµ‚æ—¥ã®äºˆå®šã ã£ãŸå ´åˆã«ã€é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»ã‚’è¨­å®š\n\
          \            if event['isAllDay']:\n                start_hour = \"00:00\"\
          \n                end_hour = \"23:59\"\n\n            attendees = event['attendees']\n\
          \            is_optional = check_optional(attendees, email)\n\n        \
          \    result[email][start_date].append({\n                \"subject\": subject,\n\
          \                \"start\": start_hour,\n                \"end\": end_hour,\n\
          \                \"isOptional\": is_optional,\n                \"showAs\"\
          :event['showAs'],\n                \"isAllDay\":event['isAllDay'],\n   \
          \             \"type\":event['type'],\n                \"location\":event['location']['displayName'],\n\
          \                \"attendees_count\": len(attendees)\n            })\n\n\
          \    # çµæœã‚’JSONå½¢å¼ã§è¡¨ç¤º\n    events = json.dumps(result,ensure_ascii=False)\n\
          \n    return {\n        \"calendar\": events,\n    }"
        code_language: python3
        desc: ''
        outputs:
          calendar:
            children: null
            type: string
        selected: false
        title: ã‚¤ãƒ™ãƒ³ãƒˆåŠ å·¥
        type: code
        variables:
        - value_selector:
          - '1729696613581'
          - body
          variable: response
      height: 54
      id: '1729697280782'
      position:
        x: 2433.7231807437965
        y: 3356.2103714159043
      positionAbsolute:
        x: 2433.7231807437965
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        height: 392
        iterator_selector:
        - '1729403585014'
        - adjustment_times
        output_selector:
        - '1732022414666'
        - output
        output_type: array[string]
        selected: false
        startNodeType: code
        start_node_id: '1731898572900'
        title: äºˆå®šã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰å„ªå…ˆåº¦ã‚’åˆ¤æ–­
        type: iteration
        width: 1896.1563749550833
      height: 392
      id: '1731895655350'
      position:
        x: 3431.151212655692
        y: 3004.564127985492
      positionAbsolute:
        x: 3431.151212655692
        y: 3004.564127985492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 1896
      zIndex: 1
    - data:
        dataset_ids:
        - 291f3870-49c6-45fd-82b2-6c67ea95e45d
        desc: ''
        isInIteration: true
        isIterationStart: false
        iteration_id: '1731895655350'
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          reranking_model:
            model: ''
            provider: ''
          score_threshold: 0.4
          top_k: 4
          weights:
            keyword_setting:
              keyword_weight: 0
            vector_setting:
              embedding_model_name: 3large-CTC-ScheduleOpenAI
              embedding_provider_name: azure_openai
              vector_weight: 1
        query_variable_selector:
        - '1731898572900'
        - item_subject
        retrieval_mode: multiple
        selected: false
        single_retrieval_config:
          model:
            completion_params: {}
            mode: chat
            name: gpt4o-CTC-ScheduleOpenAI
            provider: azure_openai
        title: å„ªå…ˆåº¦ã®ä½ã„äºˆå®šã‚¿ã‚¤ãƒˆãƒ«ãƒªã‚¹ãƒˆã¨ã®é¡ä¼¼åº¦æ¤œç´¢
        type: knowledge-retrieval
      extent: parent
      height: 92
      id: '1731895695949'
      parentId: '1731895655350'
      position:
        x: 746.8661572299225
        y: 85
      positionAbsolute:
        x: 4178.017369885614
        y: 3089.564127985492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1001
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: c6dfbad7-467d-48bf-8ba1-4c505e8c6720
            value: ''
            varType: array[object]
            variable_selector:
            - '1731895695949'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        isInIteration: true
        iteration_id: '1731895655350'
        selected: false
        title: æ¤œç´¢çµæœã¯ç©ºã‹ï¼Ÿ
        type: if-else
      extent: parent
      height: 126
      id: '1731896601287'
      parentId: '1731895655350'
      position:
        x: 1040.9397388655775
        y: 85
      positionAbsolute:
        x: 4472.09095152127
        y: 3089.564127985492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "def main(item: dict) -> dict:\n    \n    output_list = [f\"\"\"\n \
          \           ******\n            **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: {item[\"user\"]}\n        \
          \    **æ—¥æ™‚**: {item[\"day\"]}ï¼{item[\"event\"][\"start\"]}ã€œ {item[\"event\"\
          ][\"end\"]}\n            **äºˆå®šã‚¿ã‚¤ãƒˆãƒ«**: {item[\"event\"][\"subject\"]}\n  \
          \          **å„ªå…ˆåº¦åˆ¤æ–­ã®ç†ç”±**: äºˆå®šã‚¿ã‚¤ãƒˆãƒ«ã®å†…å®¹ã‹ã‚‰ã€å„ªå…ˆåº¦ãŒä½ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ \n            \"\"\"\
          ]\n\n\n    return {\n        \"output_list\": output_list,\n\n    }\n"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1731895655350'
        outputs:
          output_list:
            children: null
            type: array[string]
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®æº–å‚™
        type: code
        variables:
        - value_selector:
          - '1731895655350'
          - item
          variable: item
      extent: parent
      height: 54
      id: '1731896624716'
      parentId: '1731895655350'
      position:
        x: 1332.1563749550833
        y: 108.17990051525476
      positionAbsolute:
        x: 4763.307587610775
        y: 3112.744028500747
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "\ndef main(output_list: list) -> dict:\n    output_text = \"\"\n\n\
          \    for item in output_list:\n        output_text += item.replace(\" \"\
          , \"\")\n    return {\n        \"output_text\": output_text,\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          output_text:
            children: null
            type: string
        selected: false
        title: ãƒªã‚¹ãƒˆã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›
        type: code
        variables:
        - value_selector:
          - '1731895655350'
          - output
          variable: output_list
      height: 54
      id: '1731897570544'
      position:
        x: 5735.616719186557
        y: 3356.2103714159043
      positionAbsolute:
        x: 5735.616719186557
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(item: dict) -> dict:\n\n    output_list = []\n    item_subject\
          \ = \"\"\n\n    if item[\"event\"][\"isOptional\"] == True:\n        output_list.append(f\"\
          \"\"\n        ******\n        **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: {item[\"user\"]}\n        **æ—¥æ™‚**:\
          \ {item[\"day\"]}ï¼{item[\"event\"][\"start\"]}ã€œ {item[\"event\"][\"end\"\
          ]}\n        **äºˆå®šã‚¿ã‚¤ãƒˆãƒ«**: {item[\"event\"][\"subject\"]}\n        **å„ªå…ˆåº¦åˆ¤æ–­ã®ç†ç”±**:\
          \ ä»»æ„å‚åŠ ã®äºˆå®šã®ãŸã‚ã€å„ªå…ˆåº¦ãŒä½ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ \n        \"\"\")\n    elif item[\"event\"][\"\
          attendees_count\"] <= 1:\n        output_list.append(f\"\"\"\n        ******\n\
          \        **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: {item[\"user\"]}\n        **æ—¥æ™‚**: {item[\"day\"]}ï¼{item[\"\
          event\"][\"start\"]}ã€œ {item[\"event\"][\"end\"]}\n        **äºˆå®šã‚¿ã‚¤ãƒˆãƒ«**: {item[\"\
          event\"][\"subject\"]}\n        **å„ªå…ˆåº¦åˆ¤æ–­ã®ç†ç”±**: å‚åŠ è€…ãŒä¸€äººã®ã¿ã®äºˆå®šã®ãŸã‚ã€å„ªå…ˆåº¦ãŒä½ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚\
          \ \n        \"\"\")\n    else:\n        # ç¾åœ¨ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®äºˆå®šã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥æ‰‹\n       \
          \ item_subject = item[\"event\"][\"subject\"]\n\n\n    return {\n      \
          \  \"output_list\": output_list,\n        \"item_subject\": item_subject\n\
          \    }\n"
        code_language: python3
        dependencies:
        - name: ''
          version: ''
        desc: ''
        isInIteration: true
        isIterationStart: true
        iteration_id: '1731895655350'
        outputs:
          item_subject:
            children: null
            type: string
          output_list:
            children: null
            type: array[string]
        selected: false
        title: ä»»æ„/ã²ã¨ã‚Šã®äºˆå®šã‚’æŠ½å‡º
        type: code
        variables:
        - value_selector:
          - '1731895655350'
          - item
          variable: item
      extent: parent
      height: 54
      id: '1731898572900'
      parentId: '1731895655350'
      position:
        x: 117
        y: 85
      positionAbsolute:
        x: 3548.151212655692
        y: 3089.564127985492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 022cf557-15eb-490a-9c38-3b59b09f26d7
            value: ''
            varType: array[string]
            variable_selector:
            - '1731898572900'
            - output_list
          id: 'true'
          logical_operator: and
        desc: ''
        isInIteration: true
        iteration_id: '1731895655350'
        selected: false
        title: ä»»æ„/ä¸€äººã®äºˆå®šã§ã¯ãªã‹ã£ãŸã‹
        type: if-else
      extent: parent
      height: 126
      id: '1731898754758'
      parentId: '1731895655350'
      position:
        x: 413.77168302621885
        y: 85
      positionAbsolute:
        x: 3844.9228956819106
        y: 3089.564127985492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1731895655350'
        output_type: array[string]
        selected: false
        title: å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆã®é›†ç´„
        type: variable-aggregator
        variables:
        - - '1731896624716'
          - output_list
        - - '1731898572900'
          - output_list
      extent: parent
      height: 138
      id: '1732022414666'
      parentId: '1731895655350'
      position:
        x: 1578.700037777538
        y: 209.16376585760463
      positionAbsolute:
        x: 5009.85125043323
        y: 3213.727893843097
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        dataset_ids:
        - c38e6777-d090-4532-81ab-fd4a15e60b20
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          top_k: 4
          weights:
            keyword_setting:
              keyword_weight: 1
            vector_setting:
              embedding_model_name: 3large-CTC-ScheduleOpenAI
              embedding_provider_name: azure_openai
              vector_weight: 0
        query_variable_selector:
        - '1724663548765'
        - user_address
        retrieval_mode: multiple
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ã®æ¤œç´¢
        type: knowledge-retrieval
      height: 92
      id: '1732142701121'
      position:
        x: 881.422233238284
        y: 328.41704746463733
      positionAbsolute:
        x: 881.422233238284
        y: 328.41704746463733
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - c38e6777-d090-4532-81ab-fd4a15e60b20
        desc: ''
        isInIteration: true
        iteration_id: '1724671575189'
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          reranking_model:
            model: ''
            provider: ''
          score_threshold: null
          top_k: 10
          weights:
            keyword_setting:
              keyword_weight: 1
            vector_setting:
              embedding_model_name: 3large-CTC-ScheduleOpenAI
              embedding_provider_name: azure_openai
              vector_weight: 0
        query_variable_selector:
        - '1725426580641'
        - no_space_item
        retrieval_mode: multiple
        selected: false
        title: å‚åŠ è€…ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
        type: knowledge-retrieval
      extent: parent
      height: 92
      id: '1732143228684'
      parentId: '1724671575189'
      position:
        x: 419.2588988734078
        y: 90.7411011265923
      positionAbsolute:
        x: 2947.2603897614
        y: 497.0716205427806
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        dataset_ids:
        - fdb5a2b0-110e-48bf-977a-7809b9a17aea
        desc: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ãŒ0ä»¶ã§ã‚ã£ãŸå ´åˆã«ã€ã€Œè‡ªå‹•è»Šã®â—‹â—‹ã€ç­‰æŠ½è±¡çš„ãªæŒ‡å®šã‚„åå‰é–“é•ãˆã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹ãŸã‚ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒˆæ¤œç´¢
        isInIteration: true
        iteration_id: '1724671575189'
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          reranking_model:
            model: ''
            provider: ''
          score_threshold: null
          top_k: 10
          weights:
            keyword_setting:
              keyword_weight: 0.9
            vector_setting:
              embedding_model_name: 3large-CTC-ScheduleOpenAI
              embedding_provider_name: azure_openai
              vector_weight: 0.1
        query_variable_selector:
        - '1724671575189'
        - item
        retrieval_mode: multiple
        selected: false
        title: å‚åŠ è€…ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒˆæ¤œç´¢
        type: knowledge-retrieval
      extent: parent
      height: 152
      id: '1732143337675'
      parentId: '1724671575189'
      position:
        x: 1063.9712645762743
        y: 89.17515903740923
      positionAbsolute:
        x: 3591.9727554642664
        y: 495.5056784535975
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 29339e0f-6594-48fc-b7ad-9df490a052e3
            value: 'True'
            varType: string
            variable_selector:
            - '1729403585014'
            - adjustment_times_flag
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: èª¿æ•´å¯¾è±¡ã®äºˆå®šã¯æŠ½å‡ºã•ã‚ŒãŸã‹ï¼Ÿ
        type: if-else
      height: 126
      id: '1732144330538'
      position:
        x: 3051.2140789217337
        y: 3356.2103714159043
      positionAbsolute:
        x: 3051.2140789217337
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚

          å„ªå…ˆåº¦ã®ä½ã„äºˆå®šã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚


          --------


          ä»–ã«ã”å¸Œæœ›ã‚„èª¿æ•´äº‹é …ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ


          --------

          **å›ç­”ä¾‹**

          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„'
        desc: ''
        selected: false
        title: å„ªå…ˆåº¦ãŒä½ã„äºˆå®šã¯è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ
        type: answer
        variables: []
      height: 184
      id: '1732144424631'
      position:
        x: 3406.754936811313
        y: 3504.771430597434
      positionAbsolute:
        x: 3406.754936811313
        y: 3504.771430597434
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 00425a0b-c1d3-4698-91c4-a8505139fb9e
            value: ''
            varType: array[string]
            variable_selector:
            - '1731895655350'
            - output
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¤œç´¢çµæœã¯ç©ºã‹ï¼Ÿ
        type: if-else
      height: 126
      id: '1732153501305'
      position:
        x: 5401.969267461848
        y: 3356.2103714159043
      positionAbsolute:
        x: 5401.969267461848
        y: 3356.2103714159043
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚

          å„ªå…ˆåº¦ã®ä½ã„äºˆå®šã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚


          --------


          ä»–ã«ã”å¸Œæœ›ã‚„èª¿æ•´äº‹é …ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ


          --------

          **å›ç­”ä¾‹**

          - åˆå¾Œã§èª¿æ•´ã—ãŸã„

          - 10/23ã§æ¢ã—ã¦ã»ã—ã„

          - å‚åŠ è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€å„ªå…ˆåº¦ãŒä½ãã†ãªäºˆå®šã‚’æç¤ºã—ã¦ã»ã—ã„'
        desc: ''
        selected: false
        title: å„ªå…ˆåº¦ãŒä½ã„äºˆå®šã¯è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ (1)
        type: answer
        variables: []
      height: 184
      id: '17321535881410'
      position:
        x: 6014.300202654581
        y: 3641.582136256608
      positionAbsolute:
        x: 6014.300202654581
        y: 3641.582136256608
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -478.81351064706666
      y: -319.9503211079807
      zoom: 0.2500000000000004
